{"version":3,"file":"vueuc-BqACp4MS.js","sources":["../../node_modules/vueuc/es/shared/v-node.js","../../node_modules/vueuc/es/binder/src/utils.js","../../node_modules/vueuc/es/binder/src/Binder.js","../../node_modules/vueuc/es/binder/src/Target.js","../../node_modules/vueuc/es/shared/warn.js","../../node_modules/vueuc/es/shared/cssr.js","../../node_modules/vueuc/es/shared/finweck-tree.js","../../node_modules/vueuc/es/shared/resolve-to.js","../../node_modules/vueuc/es/lazy-teleport/src/index.js","../../node_modules/vueuc/es/binder/src/get-placement-style.js","../../node_modules/vueuc/es/binder/src/Follower.js","../../node_modules/vueuc/es/resize-observer/src/delegate.js","../../node_modules/vueuc/es/resize-observer/src/VResizeObserver.js","../../node_modules/vueuc/es/virtual-list/src/config.js","../../node_modules/vueuc/es/virtual-list/src/VirtualList.js","../../node_modules/vueuc/es/overflow/src/index.js","../../node_modules/vueuc/es/focus-trap/src/utils.js","../../node_modules/vueuc/es/focus-trap/src/index.js"],"sourcesContent":["import { Fragment, createTextVNode, Comment } from 'vue';\nexport function getSlot(scope, slots, slotName = 'default') {\n    const slot = slots[slotName];\n    if (slot === undefined) {\n        throw new Error(`[vueuc/${scope}]: slot[${slotName}] is empty.`);\n    }\n    return slot();\n}\n// o(n) flatten\nexport function flatten(vNodes, filterCommentNode = true, result = []) {\n    vNodes.forEach((vNode) => {\n        if (vNode === null)\n            return;\n        if (typeof vNode !== 'object') {\n            if (typeof vNode === 'string' || typeof vNode === 'number') {\n                result.push(createTextVNode(String(vNode)));\n            }\n            return;\n        }\n        if (Array.isArray(vNode)) {\n            flatten(vNode, filterCommentNode, result);\n            return;\n        }\n        if (vNode.type === Fragment) {\n            if (vNode.children === null)\n                return;\n            if (Array.isArray(vNode.children)) {\n                flatten(vNode.children, filterCommentNode, result);\n            }\n            // rawSlot\n        }\n        else if (vNode.type !== Comment) {\n            result.push(vNode);\n        }\n    });\n    return result;\n}\nexport function getFirstVNode(scope, slots, slotName = 'default') {\n    const slot = slots[slotName];\n    if (slot === undefined) {\n        throw new Error(`[vueuc/${scope}]: slot[${slotName}] is empty.`);\n    }\n    const content = flatten(slot());\n    // vue will normalize the slot, so slot must be an array\n    if (content.length === 1) {\n        return content[0];\n    }\n    else {\n        throw new Error(`[vueuc/${scope}]: slot[${slotName}] should have exactly one child.`);\n    }\n}\n","let viewMeasurer = null;\nexport function ensureViewBoundingRect() {\n    if (viewMeasurer === null) {\n        viewMeasurer = document.getElementById('v-binder-view-measurer');\n        if (viewMeasurer === null) {\n            viewMeasurer = document.createElement('div');\n            viewMeasurer.id = 'v-binder-view-measurer';\n            const { style } = viewMeasurer;\n            style.position = 'fixed';\n            style.left = '0';\n            style.right = '0';\n            style.top = '0';\n            style.bottom = '0';\n            style.pointerEvents = 'none';\n            style.visibility = 'hidden';\n            document.body.appendChild(viewMeasurer);\n        }\n    }\n    return viewMeasurer.getBoundingClientRect();\n}\nexport function getPointRect(x, y) {\n    const viewRect = ensureViewBoundingRect();\n    return {\n        top: y,\n        left: x,\n        height: 0,\n        width: 0,\n        right: viewRect.width - x,\n        bottom: viewRect.height - y\n    };\n}\nexport function getRect(el) {\n    const elRect = el.getBoundingClientRect();\n    const viewRect = ensureViewBoundingRect();\n    return {\n        left: elRect.left - viewRect.left,\n        top: elRect.top - viewRect.top,\n        bottom: viewRect.height + viewRect.top - elRect.bottom,\n        right: viewRect.width + viewRect.left - elRect.right,\n        width: elRect.width,\n        height: elRect.height\n    };\n}\nexport function getParentNode(node) {\n    // document type\n    if (node.nodeType === 9) {\n        return null;\n    }\n    return node.parentNode;\n}\nexport function getScrollParent(node) {\n    if (node === null)\n        return null;\n    const parentNode = getParentNode(node);\n    if (parentNode === null) {\n        return null;\n    }\n    // Document\n    if (parentNode.nodeType === 9) {\n        return document;\n    }\n    // Element\n    if (parentNode.nodeType === 1) {\n        // Firefox want us to check `-x` and `-y` variations as well\n        const { overflow, overflowX, overflowY } = getComputedStyle(parentNode);\n        if (/(auto|scroll|overlay)/.test(overflow + overflowY + overflowX)) {\n            return parentNode;\n        }\n    }\n    return getScrollParent(parentNode);\n}\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, provide, ref, inject, getCurrentInstance, onBeforeUnmount } from 'vue';\nimport { beforeNextFrameOnce } from 'seemly';\nimport { on, off } from 'evtd';\nimport { getSlot } from '../../shared/v-node';\nimport { getScrollParent } from './utils';\nconst Binder = defineComponent({\n    name: 'Binder',\n    props: {\n        syncTargetWithParent: Boolean,\n        syncTarget: {\n            type: Boolean,\n            default: true\n        }\n    },\n    setup(props) {\n        var _a;\n        provide('VBinder', (_a = getCurrentInstance()) === null || _a === void 0 ? void 0 : _a.proxy);\n        const VBinder = inject('VBinder', null);\n        const targetRef = ref(null);\n        /**\n         * If there's no nested vbinder, we can simply set the target ref.\n         *\n         * However, when it comes to:\n         * <VBinder> <- syncTarget = false\n         *\n         *              Should hold target DOM ref, but can't get it directly from\n         *              its VTarget. So if there are nested VBinder, we should:\n         *              1. Stop setting target DOM from level-1 VTarget\n         *              2. Set target DOM from level-2 VTarget\n         *              For (1), we need `syncTarget` to `false`\n         *              For (2), we need to set `syncTargetWithParent` to `true` on\n         *              level-2 VBinder\n         *   <VTarget>\n         *     <VBinder> <- syncTargetWithParent = true\n         *       <VTarget>target</VTarget>\n         *     </VBinder>\n         *     <VFollower>\n         *       content1\n         *     </VFollower>\n         *   </VTarget>\n         *   <VFollower>\n         *     content2\n         *   </VFollower>\n         * </VBinder>\n         */\n        const setTargetRef = (el) => {\n            targetRef.value = el;\n            // eslint-disable-next-line @typescript-eslint/strict-boolean-expressions\n            if (VBinder && props.syncTargetWithParent) {\n                VBinder.setTargetRef(el);\n            }\n        };\n        // scroll related\n        let scrollableNodes = [];\n        const ensureScrollListener = () => {\n            let cursor = targetRef.value;\n            while (true) {\n                cursor = getScrollParent(cursor);\n                if (cursor === null)\n                    break;\n                scrollableNodes.push(cursor);\n            }\n            for (const el of scrollableNodes) {\n                on('scroll', el, onScroll, true);\n            }\n        };\n        const removeScrollListeners = () => {\n            for (const el of scrollableNodes) {\n                off('scroll', el, onScroll, true);\n            }\n            scrollableNodes = [];\n        };\n        const followerScrollListeners = new Set();\n        const addScrollListener = (listener) => {\n            if (followerScrollListeners.size === 0) {\n                ensureScrollListener();\n            }\n            if (!followerScrollListeners.has(listener)) {\n                followerScrollListeners.add(listener);\n            }\n        };\n        const removeScrollListener = (listener) => {\n            if (followerScrollListeners.has(listener)) {\n                followerScrollListeners.delete(listener);\n            }\n            if (followerScrollListeners.size === 0) {\n                removeScrollListeners();\n            }\n        };\n        const onScroll = () => {\n            beforeNextFrameOnce(onScrollRaf);\n        };\n        const onScrollRaf = () => {\n            followerScrollListeners.forEach((listener) => listener());\n        };\n        // resize related\n        const followerResizeListeners = new Set();\n        const addResizeListener = (listener) => {\n            if (followerResizeListeners.size === 0) {\n                on('resize', window, onResize);\n            }\n            if (!followerResizeListeners.has(listener)) {\n                followerResizeListeners.add(listener);\n            }\n        };\n        const removeResizeListener = (listener) => {\n            if (followerResizeListeners.has(listener)) {\n                followerResizeListeners.delete(listener);\n            }\n            if (followerResizeListeners.size === 0) {\n                off('resize', window, onResize);\n            }\n        };\n        const onResize = () => {\n            followerResizeListeners.forEach((listener) => listener());\n        };\n        onBeforeUnmount(() => {\n            off('resize', window, onResize);\n            removeScrollListeners();\n        });\n        return {\n            targetRef,\n            setTargetRef,\n            addScrollListener,\n            removeScrollListener,\n            addResizeListener,\n            removeResizeListener\n        };\n    },\n    render() {\n        return getSlot('binder', this.$slots);\n    }\n});\nexport default Binder;\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { defineComponent, inject, withDirectives } from 'vue';\nimport { getFirstVNode } from '../../shared/v-node';\nexport default defineComponent({\n    name: 'Target',\n    setup() {\n        const { setTargetRef, syncTarget } = inject('VBinder');\n        const setTargetDirective = {\n            mounted: setTargetRef,\n            updated: setTargetRef\n        };\n        return {\n            syncTarget,\n            setTargetDirective\n        };\n    },\n    render() {\n        const { syncTarget, setTargetDirective } = this;\n        /**\n         * If you are using VBinder as a child of VBinder, the children wouldn't be\n         * a valid DOM or component that can be attached to by directive.\n         * So we won't sync target on those kind of situation and control the\n         * target sync logic manually.\n         */\n        if (syncTarget) {\n            return withDirectives(getFirstVNode('follower', this.$slots), [\n                [setTargetDirective]\n            ]);\n        }\n        return getFirstVNode('follower', this.$slots);\n    }\n});\n","export function warn(location, message) {\n    console.error(`[vueuc/${location}]: ${message}`);\n}\n","import { CssRender } from 'css-render';\nconst { c } = CssRender();\nexport { c };\nexport const cssrAnchorMetaName = 'vueuc-style';\n","function lowBit(n) {\n    return n & -n;\n}\nexport class FinweckTree {\n    /**\n     * @param l length of the array\n     * @param min min value of the array\n     */\n    constructor(l, min) {\n        this.l = l;\n        this.min = min;\n        const ft = new Array(l + 1);\n        for (let i = 0; i < l + 1; ++i) {\n            ft[i] = 0;\n        }\n        this.ft = ft;\n    }\n    /**\n     * Add arr[i] by n, start from 0\n     * @param i the index of the element to be added\n     * @param n the value to be added\n     */\n    add(i, n) {\n        if (n === 0)\n            return;\n        const { l, ft } = this;\n        i += 1;\n        while (i <= l) {\n            ft[i] += n;\n            i += lowBit(i);\n        }\n    }\n    /**\n     * Get the value of index i\n     * @param i index\n     * @returns value of the index\n     */\n    get(i) {\n        return this.sum(i + 1) - this.sum(i);\n    }\n    /**\n     * Get the sum of first i elements\n     * @param i count of head elements to be added\n     * @returns the sum of first i elements\n     */\n    sum(i) {\n        if (i === undefined)\n            i = this.l;\n        if (i <= 0)\n            return 0;\n        const { ft, min, l } = this;\n        if (i > l)\n            throw new Error('[FinweckTree.sum]: `i` is larger than length.');\n        let ret = i * min;\n        while (i > 0) {\n            ret += ft[i];\n            i -= lowBit(i);\n        }\n        return ret;\n    }\n    /**\n     * Get the largest count of head elements whose sum are <= threshold\n     * @param threshold\n     * @returns the largest count of head elements whose sum are <= threshold\n     */\n    getBound(threshold) {\n        let l = 0;\n        let r = this.l;\n        while (r > l) {\n            const m = Math.floor((l + r) / 2);\n            const sumM = this.sum(m);\n            if (sumM > threshold) {\n                r = m;\n                continue;\n            }\n            else if (sumM < threshold) {\n                if (l === m) {\n                    if (this.sum(l + 1) <= threshold)\n                        return l + 1;\n                    return m;\n                }\n                l = m;\n            }\n            else {\n                return m;\n            }\n        }\n        return l;\n    }\n}\n","export function resolveTo(selector) {\n    if (typeof selector === 'string') {\n        return document.querySelector(selector);\n    }\n    return selector();\n}\n","import { Teleport, h, toRef, computed, defineComponent } from 'vue';\nimport { useFalseUntilTruthy } from 'vooks';\nimport { getSlot } from '../../shared/v-node';\nexport default defineComponent({\n    name: 'LazyTeleport',\n    props: {\n        to: {\n            type: [String, Object],\n            default: undefined\n        },\n        disabled: Boolean,\n        show: {\n            type: Boolean,\n            required: true\n        }\n    },\n    setup(props) {\n        return {\n            showTeleport: useFalseUntilTruthy(toRef(props, 'show')),\n            mergedTo: computed(() => {\n                const { to } = props;\n                return to !== null && to !== void 0 ? to : 'body';\n            })\n        };\n    },\n    render() {\n        return this.showTeleport\n            ? this.disabled\n                ? getSlot('lazy-teleport', this.$slots)\n                : h(Teleport, {\n                    disabled: this.disabled,\n                    to: this.mergedTo\n                }, getSlot('lazy-teleport', this.$slots))\n            : null;\n    }\n});\n","const oppositionPositions = {\n    top: 'bottom',\n    bottom: 'top',\n    left: 'right',\n    right: 'left'\n};\nconst oppositeAligns = {\n    start: 'end',\n    center: 'center',\n    end: 'start'\n};\nconst propToCompare = {\n    top: 'height',\n    bottom: 'height',\n    left: 'width',\n    right: 'width'\n};\nconst transformOrigins = {\n    'bottom-start': 'top left',\n    bottom: 'top center',\n    'bottom-end': 'top right',\n    'top-start': 'bottom left',\n    top: 'bottom center',\n    'top-end': 'bottom right',\n    'right-start': 'top left',\n    right: 'center left',\n    'right-end': 'bottom left',\n    'left-start': 'top right',\n    left: 'center right',\n    'left-end': 'bottom right'\n};\nconst overlapTransformOrigin = {\n    'bottom-start': 'bottom left',\n    bottom: 'bottom center',\n    'bottom-end': 'bottom right',\n    'top-start': 'top left',\n    top: 'top center',\n    'top-end': 'top right',\n    'right-start': 'top right',\n    right: 'center right',\n    'right-end': 'bottom right',\n    'left-start': 'top left',\n    left: 'center left',\n    'left-end': 'bottom left'\n};\nconst oppositeAlignCssPositionProps = {\n    'bottom-start': 'right',\n    'bottom-end': 'left',\n    'top-start': 'right',\n    'top-end': 'left',\n    'right-start': 'bottom',\n    'right-end': 'top',\n    'left-start': 'bottom',\n    'left-end': 'top'\n};\nconst keepOffsetDirection = {\n    top: true,\n    bottom: false,\n    left: true,\n    right: false // left--\n};\nconst cssPositionToOppositeAlign = {\n    top: 'end',\n    bottom: 'start',\n    left: 'end',\n    right: 'start'\n};\nexport function getPlacementAndOffsetOfFollower(placement, targetRect, followerRect, shift, flip, overlap) {\n    if (!flip || overlap) {\n        return { placement: placement, top: 0, left: 0 };\n    }\n    const [position, align] = placement.split('-');\n    let properAlign = align !== null && align !== void 0 ? align : 'center';\n    let properOffset = {\n        top: 0,\n        left: 0\n    };\n    const deriveOffset = (oppositeAlignCssSizeProp, alignCssPositionProp, offsetVertically) => {\n        let left = 0;\n        let top = 0;\n        const diff = followerRect[oppositeAlignCssSizeProp] -\n            targetRect[alignCssPositionProp] -\n            targetRect[oppositeAlignCssSizeProp];\n        if (diff > 0 && shift) {\n            if (offsetVertically) {\n                //       screen border\n                // |-----------------------------------------|\n                // |                    | f  |               |\n                // |                    | o  |               |\n                // |                    | l  |               |\n                // |                    | l  |----           |\n                // |                    | o  |tar |          |\n                // |                    | w  |get |          |\n                // |                    | e  |    |          |\n                // |                    | r  |----           |\n                // |                     ----                |\n                // |-----------------------------------------|\n                top = keepOffsetDirection[alignCssPositionProp] ? diff : -diff;\n            }\n            else {\n                //       screen border\n                // |----------------------------------------|\n                // |                                        |\n                // |          ----------                    |\n                // |          | target |                    |\n                // |       ----------------------------------\n                // |       |       follower                 |\n                // |       ----------------------------------\n                // |                                        |\n                // |----------------------------------------|\n                left = keepOffsetDirection[alignCssPositionProp] ? diff : -diff;\n            }\n        }\n        return {\n            left,\n            top\n        };\n    };\n    const offsetVertically = position === 'left' || position === 'right';\n    // choose proper placement for non-center align\n    if (properAlign !== 'center') {\n        const oppositeAlignCssPositionProp = oppositeAlignCssPositionProps[placement];\n        const currentAlignCssPositionProp = oppositionPositions[oppositeAlignCssPositionProp];\n        const oppositeAlignCssSizeProp = propToCompare[oppositeAlignCssPositionProp];\n        // if follower rect is larger than target rect in align direction\n        // ----------[ target ]---------|\n        // ----------[     follower     ]\n        if (followerRect[oppositeAlignCssSizeProp] >\n            targetRect[oppositeAlignCssSizeProp]) {\n            if (\n            // current space is not enough\n            // ----------[ target ]---------|\n            // -------[     follower        ]\n            targetRect[oppositeAlignCssPositionProp] +\n                targetRect[oppositeAlignCssSizeProp] <\n                followerRect[oppositeAlignCssSizeProp]) {\n                const followerOverTargetSize = (followerRect[oppositeAlignCssSizeProp] -\n                    targetRect[oppositeAlignCssSizeProp]) /\n                    2;\n                if (targetRect[oppositeAlignCssPositionProp] < followerOverTargetSize ||\n                    targetRect[currentAlignCssPositionProp] < followerOverTargetSize) {\n                    // opposite align has larger space\n                    // -------[ target ]-----------|\n                    // -------[     follower     ]-|\n                    if (targetRect[oppositeAlignCssPositionProp] <\n                        targetRect[currentAlignCssPositionProp]) {\n                        properAlign = oppositeAligns[align];\n                        properOffset = deriveOffset(oppositeAlignCssSizeProp, currentAlignCssPositionProp, offsetVertically);\n                    }\n                    else {\n                        // ----------------[ target ]----|\n                        // --------[   follower     ]----|\n                        properOffset = deriveOffset(oppositeAlignCssSizeProp, oppositeAlignCssPositionProp, offsetVertically);\n                    }\n                }\n                else {\n                    // 'center' align is better\n                    // ------------[ target ]--------|\n                    // -------[       follower    ]--|\n                    properAlign = 'center';\n                }\n            }\n        }\n        else if (followerRect[oppositeAlignCssSizeProp] <\n            targetRect[oppositeAlignCssSizeProp]) {\n            // TODO: maybe center is better\n            if (targetRect[currentAlignCssPositionProp] < 0 &&\n                // opposite align has larger space\n                // ------------[   target   ]\n                // ----------------[follower]\n                targetRect[oppositeAlignCssPositionProp] >\n                    targetRect[currentAlignCssPositionProp]) {\n                properAlign = oppositeAligns[align];\n            }\n        }\n    }\n    else {\n        const possibleAlternativeAlignCssPositionProp1 = position === 'bottom' || position === 'top' ? 'left' : 'top';\n        const possibleAlternativeAlignCssPositionProp2 = oppositionPositions[possibleAlternativeAlignCssPositionProp1];\n        const alternativeAlignCssSizeProp = propToCompare[possibleAlternativeAlignCssPositionProp1];\n        const followerOverTargetSize = (followerRect[alternativeAlignCssSizeProp] -\n            targetRect[alternativeAlignCssSizeProp]) /\n            2;\n        if (\n        // center is not enough\n        // ----------- [ target ]--|\n        // -------[     follower     ]\n        targetRect[possibleAlternativeAlignCssPositionProp1] <\n            followerOverTargetSize ||\n            targetRect[possibleAlternativeAlignCssPositionProp2] <\n                followerOverTargetSize) {\n            // alternative 2 position's space is larger\n            if (targetRect[possibleAlternativeAlignCssPositionProp1] >\n                targetRect[possibleAlternativeAlignCssPositionProp2]) {\n                properAlign =\n                    cssPositionToOppositeAlign[possibleAlternativeAlignCssPositionProp1];\n                properOffset = deriveOffset(alternativeAlignCssSizeProp, possibleAlternativeAlignCssPositionProp1, offsetVertically);\n            }\n            else {\n                // alternative 1 position's space is larger\n                properAlign =\n                    cssPositionToOppositeAlign[possibleAlternativeAlignCssPositionProp2];\n                properOffset = deriveOffset(alternativeAlignCssSizeProp, possibleAlternativeAlignCssPositionProp2, offsetVertically);\n            }\n        }\n    }\n    let properPosition = position;\n    if (\n    // space is not enough\n    targetRect[position] < followerRect[propToCompare[position]] &&\n        // opposite position's space is larger\n        targetRect[position] < targetRect[oppositionPositions[position]]) {\n        properPosition = oppositionPositions[position];\n    }\n    return {\n        placement: properAlign !== 'center'\n            ? `${properPosition}-${properAlign}`\n            : properPosition,\n        left: properOffset.left,\n        top: properOffset.top\n    };\n}\nexport function getProperTransformOrigin(placement, overlap) {\n    if (overlap)\n        return overlapTransformOrigin[placement];\n    return transformOrigins[placement];\n}\n// ------------\n// |  offset  |\n// |          |\n// | [target] |\n// |          |\n// ------------\n// TODO: refactor it to remove dup logic\nexport function getOffset(placement, offsetRect, targetRect, offsetTopToStandardPlacement, offsetLeftToStandardPlacement, overlap) {\n    if (overlap) {\n        switch (placement) {\n            case 'bottom-start':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top + targetRect.height)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left)}px`,\n                    transform: 'translateY(-100%)'\n                };\n            case 'bottom-end':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top + targetRect.height)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left + targetRect.width)}px`,\n                    transform: 'translateX(-100%) translateY(-100%)'\n                };\n            case 'top-start':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left)}px`,\n                    transform: ''\n                };\n            case 'top-end':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left + targetRect.width)}px`,\n                    transform: 'translateX(-100%)'\n                };\n            case 'right-start':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left + targetRect.width)}px`,\n                    transform: 'translateX(-100%)'\n                };\n            case 'right-end':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top + targetRect.height)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left + targetRect.width)}px`,\n                    transform: 'translateX(-100%) translateY(-100%)'\n                };\n            case 'left-start':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left)}px`,\n                    transform: ''\n                };\n            case 'left-end':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top + targetRect.height)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left)}px`,\n                    transform: 'translateY(-100%)'\n                };\n            case 'top':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left + targetRect.width / 2)}px`,\n                    transform: 'translateX(-50%)'\n                };\n            case 'right':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top + targetRect.height / 2)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left + targetRect.width)}px`,\n                    transform: 'translateX(-100%) translateY(-50%)'\n                };\n            case 'left':\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top + targetRect.height / 2)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left)}px`,\n                    transform: 'translateY(-50%)'\n                };\n            case 'bottom':\n            default:\n                return {\n                    top: `${Math.round(targetRect.top - offsetRect.top + targetRect.height)}px`,\n                    left: `${Math.round(targetRect.left - offsetRect.left + targetRect.width / 2)}px`,\n                    transform: 'translateX(-50%) translateY(-100%)'\n                };\n        }\n    }\n    switch (placement) {\n        case 'bottom-start':\n            return {\n                top: `${Math.round(targetRect.top -\n                    offsetRect.top +\n                    targetRect.height +\n                    offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left - offsetRect.left + offsetLeftToStandardPlacement)}px`,\n                transform: ''\n            };\n        case 'bottom-end':\n            return {\n                top: `${Math.round(targetRect.top -\n                    offsetRect.top +\n                    targetRect.height +\n                    offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left -\n                    offsetRect.left +\n                    targetRect.width +\n                    offsetLeftToStandardPlacement)}px`,\n                transform: 'translateX(-100%)'\n            };\n        case 'top-start':\n            return {\n                top: `${Math.round(targetRect.top - offsetRect.top + offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left - offsetRect.left + offsetLeftToStandardPlacement)}px`,\n                transform: 'translateY(-100%)'\n            };\n        case 'top-end':\n            return {\n                top: `${Math.round(targetRect.top - offsetRect.top + offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left -\n                    offsetRect.left +\n                    targetRect.width +\n                    offsetLeftToStandardPlacement)}px`,\n                transform: 'translateX(-100%) translateY(-100%)'\n            };\n        case 'right-start':\n            return {\n                top: `${Math.round(targetRect.top - offsetRect.top + offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left -\n                    offsetRect.left +\n                    targetRect.width +\n                    offsetLeftToStandardPlacement)}px`,\n                transform: ''\n            };\n        case 'right-end':\n            return {\n                top: `${Math.round(targetRect.top -\n                    offsetRect.top +\n                    targetRect.height +\n                    offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left -\n                    offsetRect.left +\n                    targetRect.width +\n                    offsetLeftToStandardPlacement)}px`,\n                transform: 'translateY(-100%)'\n            };\n        case 'left-start':\n            return {\n                top: `${Math.round(targetRect.top - offsetRect.top + offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left - offsetRect.left + offsetLeftToStandardPlacement)}px`,\n                transform: 'translateX(-100%)'\n            };\n        case 'left-end':\n            return {\n                top: `${Math.round(targetRect.top -\n                    offsetRect.top +\n                    targetRect.height +\n                    offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left - offsetRect.left + offsetLeftToStandardPlacement)}px`,\n                transform: 'translateX(-100%) translateY(-100%)'\n            };\n        case 'top':\n            return {\n                top: `${Math.round(targetRect.top - offsetRect.top + offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left -\n                    offsetRect.left +\n                    targetRect.width / 2 +\n                    offsetLeftToStandardPlacement)}px`,\n                transform: 'translateY(-100%) translateX(-50%)'\n            };\n        case 'right':\n            return {\n                top: `${Math.round(targetRect.top -\n                    offsetRect.top +\n                    targetRect.height / 2 +\n                    offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left -\n                    offsetRect.left +\n                    targetRect.width +\n                    offsetLeftToStandardPlacement)}px`,\n                transform: 'translateY(-50%)'\n            };\n        case 'left':\n            return {\n                top: `${Math.round(targetRect.top -\n                    offsetRect.top +\n                    targetRect.height / 2 +\n                    offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left - offsetRect.left + offsetLeftToStandardPlacement)}px`,\n                transform: 'translateY(-50%) translateX(-100%)'\n            };\n        case 'bottom':\n        default:\n            return {\n                top: `${Math.round(targetRect.top -\n                    offsetRect.top +\n                    targetRect.height +\n                    offsetTopToStandardPlacement)}px`,\n                left: `${Math.round(targetRect.left -\n                    offsetRect.left +\n                    targetRect.width / 2 +\n                    offsetLeftToStandardPlacement)}px`,\n                transform: 'translateX(-50%)'\n            };\n    }\n}\n","/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { h, defineComponent, inject, nextTick, watch, toRef, ref, onMounted, onBeforeUnmount, withDirectives } from 'vue';\nimport { zindexable } from 'vdirs';\nimport { useMemo, useIsMounted, onFontsReady } from 'vooks';\nimport { useSsrAdapter } from '@css-render/vue3-ssr';\nimport { c, cssrAnchorMetaName } from '../../shared';\nimport LazyTeleport from '../../lazy-teleport/src/index';\nimport { getPlacementAndOffsetOfFollower, getProperTransformOrigin, getOffset } from './get-placement-style';\nimport { getPointRect, getRect } from './utils';\nconst style = c([\n    c('.v-binder-follower-container', {\n        position: 'absolute',\n        left: '0',\n        right: '0',\n        top: '0',\n        height: '0',\n        pointerEvents: 'none',\n        zIndex: 'auto'\n    }),\n    c('.v-binder-follower-content', {\n        position: 'absolute',\n        zIndex: 'auto'\n    }, [\n        c('> *', {\n            pointerEvents: 'all'\n        })\n    ])\n]);\nexport default defineComponent({\n    name: 'Follower',\n    inheritAttrs: false,\n    props: {\n        show: Boolean,\n        enabled: {\n            type: Boolean,\n            default: undefined\n        },\n        placement: {\n            type: String,\n            default: 'bottom'\n        },\n        syncTrigger: {\n            type: Array,\n            default: ['resize', 'scroll']\n        },\n        to: [String, Object],\n        flip: {\n            type: Boolean,\n            default: true\n        },\n        internalShift: Boolean,\n        x: Number,\n        y: Number,\n        width: String,\n        minWidth: String,\n        containerClass: String,\n        teleportDisabled: Boolean,\n        zindexable: {\n            type: Boolean,\n            default: true\n        },\n        zIndex: Number,\n        overlap: Boolean\n    },\n    setup(props) {\n        const VBinder = inject('VBinder');\n        const mergedEnabledRef = useMemo(() => {\n            return props.enabled !== undefined ? props.enabled : props.show;\n        });\n        const followerRef = ref(null);\n        const offsetContainerRef = ref(null);\n        const ensureListeners = () => {\n            const { syncTrigger } = props;\n            if (syncTrigger.includes('scroll')) {\n                VBinder.addScrollListener(syncPosition);\n            }\n            if (syncTrigger.includes('resize')) {\n                VBinder.addResizeListener(syncPosition);\n            }\n        };\n        const removeListeners = () => {\n            VBinder.removeScrollListener(syncPosition);\n            VBinder.removeResizeListener(syncPosition);\n        };\n        onMounted(() => {\n            if (mergedEnabledRef.value) {\n                syncPosition();\n                ensureListeners();\n            }\n        });\n        const ssrAdapter = useSsrAdapter();\n        style.mount({\n            id: 'vueuc/binder',\n            head: true,\n            anchorMetaName: cssrAnchorMetaName,\n            ssr: ssrAdapter\n        });\n        onBeforeUnmount(() => {\n            removeListeners();\n        });\n        onFontsReady(() => {\n            if (mergedEnabledRef.value) {\n                syncPosition();\n            }\n        });\n        const syncPosition = () => {\n            if (!mergedEnabledRef.value) {\n                return;\n            }\n            const follower = followerRef.value;\n            // sometimes watched props change before its dom is ready\n            // for example: show=false, x=undefined, y=undefined\n            //              show=true,  x=0,         y=0\n            // will cause error\n            // I may optimize the watch start point later\n            if (follower === null)\n                return;\n            const target = VBinder.targetRef;\n            const { x, y, overlap } = props;\n            const targetRect = x !== undefined && y !== undefined\n                ? getPointRect(x, y)\n                : getRect(target);\n            follower.style.setProperty('--v-target-width', `${Math.round(targetRect.width)}px`);\n            follower.style.setProperty('--v-target-height', `${Math.round(targetRect.height)}px`);\n            const { width, minWidth, placement, internalShift, flip } = props;\n            follower.setAttribute('v-placement', placement);\n            if (overlap) {\n                follower.setAttribute('v-overlap', '');\n            }\n            else {\n                follower.removeAttribute('v-overlap');\n            }\n            const { style } = follower;\n            if (width === 'target') {\n                style.width = `${targetRect.width}px`;\n            }\n            else if (width !== undefined) {\n                style.width = width;\n            }\n            else {\n                style.width = '';\n            }\n            if (minWidth === 'target') {\n                style.minWidth = `${targetRect.width}px`;\n            }\n            else if (minWidth !== undefined) {\n                style.minWidth = minWidth;\n            }\n            else {\n                style.minWidth = '';\n            }\n            const followerRect = getRect(follower);\n            const offsetContainerRect = getRect(offsetContainerRef.value);\n            const { left: offsetLeftToStandardPlacement, top: offsetTopToStandardPlacement, placement: properPlacement } = getPlacementAndOffsetOfFollower(placement, targetRect, followerRect, internalShift, flip, overlap);\n            const properTransformOrigin = getProperTransformOrigin(properPlacement, overlap);\n            const { left, top, transform } = getOffset(properPlacement, offsetContainerRect, targetRect, offsetTopToStandardPlacement, offsetLeftToStandardPlacement, overlap);\n            // we assume that the content size doesn't change after flip,\n            // nor we need to make sync logic more complex\n            follower.setAttribute('v-placement', properPlacement);\n            follower.style.setProperty('--v-offset-left', `${Math.round(offsetLeftToStandardPlacement)}px`);\n            follower.style.setProperty('--v-offset-top', `${Math.round(offsetTopToStandardPlacement)}px`);\n            follower.style.transform = `translateX(${left}) translateY(${top}) ${transform}`;\n            follower.style.setProperty('--v-transform-origin', properTransformOrigin);\n            follower.style.transformOrigin = properTransformOrigin;\n        };\n        watch(mergedEnabledRef, (value) => {\n            if (value) {\n                ensureListeners();\n                syncOnNextTick();\n            }\n            else {\n                removeListeners();\n            }\n        });\n        const syncOnNextTick = () => {\n            nextTick()\n                .then(syncPosition)\n                .catch((e) => console.error(e));\n        };\n        [\n            'placement',\n            'x',\n            'y',\n            'internalShift',\n            'flip',\n            'width',\n            'overlap',\n            'minWidth'\n        ].forEach((prop) => {\n            watch(toRef(props, prop), syncPosition);\n        });\n        ['teleportDisabled'].forEach((prop) => {\n            watch(toRef(props, prop), syncOnNextTick);\n        });\n        watch(toRef(props, 'syncTrigger'), (value) => {\n            if (!value.includes('resize')) {\n                VBinder.removeResizeListener(syncPosition);\n            }\n            else {\n                VBinder.addResizeListener(syncPosition);\n            }\n            if (!value.includes('scroll')) {\n                VBinder.removeScrollListener(syncPosition);\n            }\n            else {\n                VBinder.addScrollListener(syncPosition);\n            }\n        });\n        const isMountedRef = useIsMounted();\n        const mergedToRef = useMemo(() => {\n            const { to } = props;\n            if (to !== undefined)\n                return to;\n            if (isMountedRef.value) {\n                // TODO: find proper container\n                return undefined;\n            }\n            return undefined;\n        });\n        return {\n            VBinder,\n            mergedEnabled: mergedEnabledRef,\n            offsetContainerRef,\n            followerRef,\n            mergedTo: mergedToRef,\n            syncPosition\n        };\n    },\n    render() {\n        return h(LazyTeleport, {\n            show: this.show,\n            to: this.mergedTo,\n            disabled: this.teleportDisabled\n        }, {\n            default: () => {\n                var _a, _b;\n                const vNode = h('div', {\n                    class: ['v-binder-follower-container', this.containerClass],\n                    ref: 'offsetContainerRef'\n                }, [\n                    h('div', {\n                        class: 'v-binder-follower-content',\n                        ref: 'followerRef'\n                    }, (_b = (_a = this.$slots).default) === null || _b === void 0 ? void 0 : _b.call(_a))\n                ]);\n                if (this.zindexable) {\n                    return withDirectives(vNode, [\n                        [\n                            zindexable,\n                            {\n                                enabled: this.mergedEnabled,\n                                zIndex: this.zIndex\n                            }\n                        ]\n                    ]);\n                }\n                return vNode;\n            }\n        });\n    }\n});\n","import { ResizeObserver as PolyfillResizeObserver } from '@juggle/resize-observer';\nclass ResizeObserverDelegate {\n    constructor() {\n        this.handleResize = this.handleResize.bind(this);\n        this.observer = new ((typeof window !== 'undefined' &&\n            window.ResizeObserver) ||\n            PolyfillResizeObserver)(this.handleResize);\n        this.elHandlersMap = new Map();\n    }\n    handleResize(entries) {\n        for (const entry of entries) {\n            const handler = this.elHandlersMap.get(entry.target);\n            if (handler !== undefined) {\n                handler(entry);\n            }\n        }\n    }\n    registerHandler(el, handler) {\n        this.elHandlersMap.set(el, handler);\n        this.observer.observe(el);\n    }\n    unregisterHandler(el) {\n        if (!this.elHandlersMap.has(el)) {\n            return;\n        }\n        this.elHandlersMap.delete(el);\n        this.observer.unobserve(el);\n    }\n}\nexport default new ResizeObserverDelegate();\n","import { defineComponent, renderSlot, getCurrentInstance, onMounted, onBeforeUnmount } from 'vue';\nimport delegate from './delegate';\nimport { warn } from '../../shared';\nexport default defineComponent({\n    name: 'ResizeObserver',\n    props: {\n        onResize: Function\n    },\n    setup(props) {\n        let registered = false;\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const proxy = getCurrentInstance().proxy;\n        function handleResize(entry) {\n            const { onResize } = props;\n            if (onResize !== undefined)\n                onResize(entry);\n        }\n        onMounted(() => {\n            const el = proxy.$el;\n            if (el === undefined) {\n                warn('resize-observer', '$el does not exist.');\n                return;\n            }\n            if (el.nextElementSibling !== el.nextSibling) {\n                if (el.nodeType === 3 && el.nodeValue !== '') {\n                    warn('resize-observer', '$el can not be observed (it may be a text node).');\n                    return;\n                }\n            }\n            if (el.nextElementSibling !== null) {\n                delegate.registerHandler(el.nextElementSibling, handleResize);\n                registered = true;\n            }\n        });\n        onBeforeUnmount(() => {\n            if (registered) {\n                delegate.unregisterHandler(proxy.$el.nextElementSibling);\n            }\n        });\n    },\n    render() {\n        return renderSlot(this.$slots, 'default');\n    }\n});\n","let maybeTouch;\nexport function ensureMaybeTouch() {\n    if (typeof document === 'undefined')\n        return false;\n    if (maybeTouch === undefined) {\n        if ('matchMedia' in window) {\n            maybeTouch = window.matchMedia('(pointer:coarse)').matches;\n        }\n        else {\n            maybeTouch = false;\n        }\n    }\n    return maybeTouch;\n}\nlet wheelScale;\nexport function ensureWheelScale() {\n    if (typeof document === 'undefined')\n        return 1;\n    if (wheelScale === undefined) {\n        wheelScale = 'chrome' in window ? window.devicePixelRatio : 1;\n    }\n    return wheelScale;\n}\n","/* eslint-disable no-void */\n/* eslint-disable @typescript-eslint/restrict-plus-operands */\nimport { mergeProps, computed, defineComponent, ref, onMounted, h, onActivated, onDeactivated } from 'vue';\nimport { beforeNextFrameOnce, depx, pxfy } from 'seemly';\nimport { useMemo } from 'vooks';\nimport { useSsrAdapter } from '@css-render/vue3-ssr';\nimport VResizeObserver from '../../resize-observer/src/VResizeObserver';\nimport { c, cssrAnchorMetaName, FinweckTree } from '../../shared';\nimport { ensureMaybeTouch, ensureWheelScale } from './config';\nconst styles = c('.v-vl', {\n    maxHeight: 'inherit',\n    height: '100%',\n    overflow: 'auto',\n    minWidth: '1px' // a zero width container won't be scrollable\n}, [\n    c('&:not(.v-vl--show-scrollbar)', {\n        scrollbarWidth: 'none'\n    }, [\n        c('&::-webkit-scrollbar, &::-webkit-scrollbar-track-piece, &::-webkit-scrollbar-thumb', {\n            width: 0,\n            height: 0,\n            display: 'none'\n        })\n    ])\n]);\nexport default defineComponent({\n    name: 'VirtualList',\n    inheritAttrs: false,\n    props: {\n        showScrollbar: {\n            type: Boolean,\n            default: true\n        },\n        items: {\n            type: Array,\n            default: () => []\n        },\n        // it is suppose to be the min height\n        itemSize: {\n            type: Number,\n            required: true\n        },\n        itemResizable: Boolean,\n        itemsStyle: [String, Object],\n        visibleItemsTag: {\n            type: [String, Object],\n            default: 'div'\n        },\n        visibleItemsProps: Object,\n        ignoreItemResize: Boolean,\n        onScroll: Function,\n        onWheel: Function,\n        onResize: Function,\n        defaultScrollKey: [Number, String],\n        defaultScrollIndex: Number,\n        keyField: {\n            type: String,\n            default: 'key'\n        },\n        // Whether it is a good API?\n        // ResizeObserver + footer & header is not enough.\n        // Too complex for simple case\n        paddingTop: {\n            type: [Number, String],\n            default: 0\n        },\n        paddingBottom: {\n            type: [Number, String],\n            default: 0\n        }\n    },\n    setup(props) {\n        const ssrAdapter = useSsrAdapter();\n        styles.mount({\n            id: 'vueuc/virtual-list',\n            head: true,\n            anchorMetaName: cssrAnchorMetaName,\n            ssr: ssrAdapter\n        });\n        onMounted(() => {\n            const { defaultScrollIndex, defaultScrollKey } = props;\n            if (defaultScrollIndex !== undefined && defaultScrollIndex !== null) {\n                scrollTo({ index: defaultScrollIndex });\n            }\n            else if (defaultScrollKey !== undefined && defaultScrollKey !== null) {\n                scrollTo({ key: defaultScrollKey });\n            }\n        });\n        let isDeactivated = false;\n        let activateStateInitialized = false;\n        onActivated(() => {\n            isDeactivated = false;\n            if (!activateStateInitialized) {\n                activateStateInitialized = true;\n                return;\n            }\n            // remount\n            scrollTo({ top: scrollTopRef.value, left: scrollLeft });\n        });\n        onDeactivated(() => {\n            isDeactivated = true;\n            if (!activateStateInitialized) {\n                activateStateInitialized = true;\n            }\n        });\n        const keyIndexMapRef = computed(() => {\n            const map = new Map();\n            const { keyField } = props;\n            props.items.forEach((item, index) => {\n                map.set(item[keyField], index);\n            });\n            return map;\n        });\n        const listElRef = ref(null);\n        const listHeightRef = ref(undefined);\n        const keyToHeightOffset = new Map();\n        const finweckTreeRef = computed(() => {\n            const { items, itemSize, keyField } = props;\n            const ft = new FinweckTree(items.length, itemSize);\n            items.forEach((item, index) => {\n                const key = item[keyField];\n                const heightOffset = keyToHeightOffset.get(key);\n                if (heightOffset !== undefined) {\n                    ft.add(index, heightOffset);\n                }\n            });\n            return ft;\n        });\n        const finweckTreeUpdateTrigger = ref(0);\n        let scrollLeft = 0;\n        const scrollTopRef = ref(0);\n        const startIndexRef = useMemo(() => {\n            return Math.max(finweckTreeRef.value.getBound(scrollTopRef.value - depx(props.paddingTop)) - 1, 0);\n        });\n        const viewportItemsRef = computed(() => {\n            const { value: listHeight } = listHeightRef;\n            if (listHeight === undefined)\n                return [];\n            const { items, itemSize } = props;\n            const startIndex = startIndexRef.value;\n            const endIndex = Math.min(startIndex + Math.ceil(listHeight / itemSize + 1), items.length - 1);\n            const viewportItems = [];\n            for (let i = startIndex; i <= endIndex; ++i) {\n                viewportItems.push(items[i]);\n            }\n            return viewportItems;\n        });\n        const scrollTo = (options, y) => {\n            if (typeof options === 'number') {\n                scrollToPosition(options, y, 'auto');\n                return;\n            }\n            const { left, top, index, key, position, behavior, debounce = true } = options;\n            if (left !== undefined || top !== undefined) {\n                scrollToPosition(left, top, behavior);\n            }\n            else if (index !== undefined) {\n                scrollToIndex(index, behavior, debounce);\n            }\n            else if (key !== undefined) {\n                const toIndex = keyIndexMapRef.value.get(key);\n                if (toIndex !== undefined)\n                    scrollToIndex(toIndex, behavior, debounce);\n            }\n            else if (position === 'bottom') {\n                scrollToPosition(0, Number.MAX_SAFE_INTEGER, behavior);\n            }\n            else if (position === 'top') {\n                scrollToPosition(0, 0, behavior);\n            }\n        };\n        let anchorIndex;\n        let anchorTimerId = null;\n        function scrollToIndex(index, behavior, debounce) {\n            const { value: ft } = finweckTreeRef;\n            const targetTop = ft.sum(index) + depx(props.paddingTop);\n            if (!debounce) {\n                listElRef.value.scrollTo({\n                    left: 0,\n                    top: targetTop,\n                    behavior\n                });\n            }\n            else {\n                anchorIndex = index;\n                if (anchorTimerId !== null) {\n                    window.clearTimeout(anchorTimerId);\n                }\n                anchorTimerId = window.setTimeout(() => {\n                    anchorIndex = undefined;\n                    anchorTimerId = null;\n                }, 16); // use 0 ms may be ealier than resize callback...\n                const { scrollTop, offsetHeight } = listElRef.value;\n                if (targetTop > scrollTop) {\n                    const itemSize = ft.get(index);\n                    if (targetTop + itemSize <= scrollTop + offsetHeight) {\n                        // do nothing\n                    }\n                    else {\n                        listElRef.value.scrollTo({\n                            left: 0,\n                            top: targetTop + itemSize - offsetHeight,\n                            behavior\n                        });\n                    }\n                }\n                else {\n                    listElRef.value.scrollTo({\n                        left: 0,\n                        top: targetTop,\n                        behavior\n                    });\n                }\n            }\n        }\n        function scrollToPosition(left, top, behavior) {\n            listElRef.value.scrollTo({\n                left,\n                top,\n                behavior\n            });\n        }\n        function handleItemResize(key, entry) {\n            var _a, _b, _c;\n            if (isDeactivated)\n                return;\n            if (props.ignoreItemResize)\n                return;\n            if (isHideByVShow(entry.target))\n                return;\n            const { value: ft } = finweckTreeRef;\n            const index = keyIndexMapRef.value.get(key);\n            const previousHeight = ft.get(index);\n            const height = (_c = (_b = (_a = entry.borderBoxSize) === null || _a === void 0 ? void 0 : _a[0]) === null || _b === void 0 ? void 0 : _b.blockSize) !== null && _c !== void 0 ? _c : entry.contentRect.height;\n            if (height === previousHeight)\n                return;\n            // height offset based on itemSize\n            // used when rebuild the finweck tree\n            const offset = height - props.itemSize;\n            if (offset === 0) {\n                keyToHeightOffset.delete(key);\n            }\n            else {\n                keyToHeightOffset.set(key, height - props.itemSize);\n            }\n            // delta height based on finweck tree data\n            const delta = height - previousHeight;\n            if (delta === 0)\n                return;\n            ft.add(index, delta);\n            const listEl = listElRef.value;\n            if (listEl != null) {\n                if (anchorIndex === undefined) {\n                    const previousHeightSum = ft.sum(index);\n                    if (listEl.scrollTop > previousHeightSum) {\n                        listEl.scrollBy(0, delta);\n                    }\n                }\n                else {\n                    if (index < anchorIndex) {\n                        listEl.scrollBy(0, delta);\n                    }\n                    else if (index === anchorIndex) {\n                        const previousHeightSum = ft.sum(index);\n                        if (height + previousHeightSum >\n                            // Note, listEl shouldn't have border, nor offsetHeight won't be\n                            // correct\n                            listEl.scrollTop + listEl.offsetHeight) {\n                            listEl.scrollBy(0, delta);\n                        }\n                    }\n                }\n                syncViewport();\n            }\n            finweckTreeUpdateTrigger.value++;\n        }\n        const mayUseWheel = !ensureMaybeTouch();\n        let wheelCatched = false;\n        function handleListScroll(e) {\n            var _a;\n            (_a = props.onScroll) === null || _a === void 0 ? void 0 : _a.call(props, e);\n            if (!mayUseWheel || !wheelCatched) {\n                syncViewport();\n            }\n        }\n        function handleListWheel(e) {\n            var _a;\n            (_a = props.onWheel) === null || _a === void 0 ? void 0 : _a.call(props, e);\n            if (mayUseWheel) {\n                const listEl = listElRef.value;\n                if (listEl != null) {\n                    if (e.deltaX === 0) {\n                        if (listEl.scrollTop === 0 && e.deltaY <= 0) {\n                            return;\n                        }\n                        if (listEl.scrollTop + listEl.offsetHeight >= listEl.scrollHeight &&\n                            e.deltaY >= 0) {\n                            return;\n                        }\n                    }\n                    e.preventDefault();\n                    listEl.scrollTop += e.deltaY / ensureWheelScale();\n                    listEl.scrollLeft += e.deltaX / ensureWheelScale();\n                    syncViewport();\n                    wheelCatched = true;\n                    beforeNextFrameOnce(() => {\n                        wheelCatched = false;\n                    });\n                }\n            }\n        }\n        function handleListResize(entry) {\n            if (isDeactivated)\n                return;\n            // List is HTMLElement\n            if (isHideByVShow(entry.target))\n                return;\n            // If height is same, return\n            if (entry.contentRect.height === listHeightRef.value)\n                return;\n            listHeightRef.value = entry.contentRect.height;\n            const { onResize } = props;\n            if (onResize !== undefined)\n                onResize(entry);\n        }\n        function syncViewport() {\n            const { value: listEl } = listElRef;\n            // sometime ref el can be null\n            // https://github.com/TuSimple/naive-ui/issues/811\n            if (listEl == null)\n                return;\n            scrollTopRef.value = listEl.scrollTop;\n            scrollLeft = listEl.scrollLeft;\n        }\n        function isHideByVShow(el) {\n            let cursor = el;\n            while (cursor !== null) {\n                if (cursor.style.display === 'none')\n                    return true;\n                cursor = cursor.parentElement;\n            }\n            return false;\n        }\n        return {\n            listHeight: listHeightRef,\n            listStyle: {\n                overflow: 'auto'\n            },\n            keyToIndex: keyIndexMapRef,\n            itemsStyle: computed(() => {\n                const { itemResizable } = props;\n                const height = pxfy(finweckTreeRef.value.sum());\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                finweckTreeUpdateTrigger.value;\n                return [\n                    props.itemsStyle,\n                    {\n                        boxSizing: 'content-box',\n                        height: itemResizable ? '' : height,\n                        minHeight: itemResizable ? height : '',\n                        paddingTop: pxfy(props.paddingTop),\n                        paddingBottom: pxfy(props.paddingBottom)\n                    }\n                ];\n            }),\n            visibleItemsStyle: computed(() => {\n                // eslint-disable-next-line @typescript-eslint/no-unused-expressions\n                finweckTreeUpdateTrigger.value;\n                return {\n                    transform: `translateY(${pxfy(finweckTreeRef.value.sum(startIndexRef.value))})`\n                };\n            }),\n            viewportItems: viewportItemsRef,\n            listElRef,\n            itemsElRef: ref(null),\n            scrollTo,\n            handleListResize,\n            handleListScroll,\n            handleListWheel,\n            handleItemResize\n        };\n    },\n    render() {\n        const { itemResizable, keyField, keyToIndex, visibleItemsTag } = this;\n        return h(VResizeObserver, {\n            onResize: this.handleListResize\n        }, {\n            default: () => {\n                var _a, _b;\n                return h('div', mergeProps(this.$attrs, {\n                    class: ['v-vl', this.showScrollbar && 'v-vl--show-scrollbar'],\n                    onScroll: this.handleListScroll,\n                    onWheel: this.handleListWheel,\n                    ref: 'listElRef'\n                }), [\n                    this.items.length !== 0\n                        ? h('div', {\n                            ref: 'itemsElRef',\n                            class: 'v-vl-items',\n                            style: this.itemsStyle\n                        }, [\n                            h(visibleItemsTag, Object.assign({\n                                class: 'v-vl-visible-items',\n                                style: this.visibleItemsStyle\n                            }, this.visibleItemsProps), {\n                                default: () => this.viewportItems.map((item) => {\n                                    const key = item[keyField];\n                                    const index = keyToIndex.get(key);\n                                    const itemVNode = this.$slots.default({\n                                        item,\n                                        index\n                                    })[0];\n                                    if (itemResizable) {\n                                        return h(VResizeObserver, {\n                                            key,\n                                            onResize: (entry) => this.handleItemResize(key, entry)\n                                        }, {\n                                            default: () => itemVNode\n                                        });\n                                    }\n                                    itemVNode.key = key;\n                                    return itemVNode;\n                                })\n                            })\n                        ])\n                        : (_b = (_a = this.$slots).empty) === null || _b === void 0 ? void 0 : _b.call(_a)\n                ]);\n            }\n        });\n    }\n});\n","/* eslint-disable @typescript-eslint/strict-boolean-expressions */\nimport { defineComponent, renderSlot, h, onMounted, ref, nextTick } from 'vue';\nimport { useSsrAdapter } from '@css-render/vue3-ssr';\nimport { c, cssrAnchorMetaName } from '../../shared';\nconst hiddenAttr = 'v-hidden';\nconst style = c('[v-hidden]', {\n    display: 'none!important'\n});\nexport default defineComponent({\n    name: 'Overflow',\n    props: {\n        getCounter: Function,\n        getTail: Function,\n        updateCounter: Function,\n        onUpdateCount: Function,\n        onUpdateOverflow: Function\n    },\n    setup(props, { slots }) {\n        const selfRef = ref(null);\n        const counterRef = ref(null);\n        function deriveCounter(options) {\n            const { value: self } = selfRef;\n            const { getCounter, getTail } = props;\n            let counter;\n            if (getCounter !== undefined)\n                counter = getCounter();\n            else {\n                counter = counterRef.value;\n            }\n            if (!self || !counter)\n                return;\n            if (counter.hasAttribute(hiddenAttr)) {\n                counter.removeAttribute(hiddenAttr);\n            }\n            const { children } = self;\n            if (options.showAllItemsBeforeCalculate) {\n                for (const child of children) {\n                    if (child.hasAttribute(hiddenAttr)) {\n                        child.removeAttribute(hiddenAttr);\n                    }\n                }\n            }\n            const containerWidth = self.offsetWidth;\n            const childWidths = [];\n            const tail = slots.tail ? getTail === null || getTail === void 0 ? void 0 : getTail() : null;\n            let childWidthSum = tail ? tail.offsetWidth : 0;\n            let overflow = false;\n            const len = self.children.length - (slots.tail ? 1 : 0);\n            for (let i = 0; i < len - 1; ++i) {\n                if (i < 0)\n                    continue;\n                const child = children[i];\n                if (overflow) {\n                    if (!child.hasAttribute(hiddenAttr)) {\n                        child.setAttribute(hiddenAttr, '');\n                    }\n                    continue;\n                }\n                else if (child.hasAttribute(hiddenAttr)) {\n                    child.removeAttribute(hiddenAttr);\n                }\n                const childWidth = child.offsetWidth;\n                childWidthSum += childWidth;\n                childWidths[i] = childWidth;\n                if (childWidthSum > containerWidth) {\n                    const { updateCounter } = props;\n                    for (let j = i; j >= 0; --j) {\n                        const restCount = len - 1 - j;\n                        if (updateCounter !== undefined) {\n                            updateCounter(restCount);\n                        }\n                        else {\n                            counter.textContent = `${restCount}`;\n                        }\n                        const counterWidth = counter.offsetWidth;\n                        childWidthSum -= childWidths[j];\n                        if (childWidthSum + counterWidth <= containerWidth || j === 0) {\n                            overflow = true;\n                            i = j - 1;\n                            if (tail) {\n                                // tail too long or 1st element too long\n                                // we only consider tail now\n                                if (i === -1) {\n                                    tail.style.maxWidth = `${containerWidth - counterWidth}px`;\n                                    tail.style.boxSizing = 'border-box';\n                                }\n                                else {\n                                    tail.style.maxWidth = '';\n                                }\n                            }\n                            const { onUpdateCount } = props;\n                            if (onUpdateCount)\n                                onUpdateCount(restCount);\n                            break;\n                        }\n                    }\n                }\n            }\n            const { onUpdateOverflow } = props;\n            if (!overflow) {\n                if (onUpdateOverflow !== undefined) {\n                    onUpdateOverflow(false);\n                }\n                counter.setAttribute(hiddenAttr, '');\n            }\n            else {\n                if (onUpdateOverflow !== undefined) {\n                    onUpdateOverflow(true);\n                }\n            }\n        }\n        const ssrAdapter = useSsrAdapter();\n        style.mount({\n            id: 'vueuc/overflow',\n            head: true,\n            anchorMetaName: cssrAnchorMetaName,\n            ssr: ssrAdapter\n        });\n        onMounted(() => deriveCounter({\n            showAllItemsBeforeCalculate: false\n        }));\n        // besides onMounted, other case should be manually triggered, or we shoud watch items\n        return {\n            selfRef,\n            counterRef,\n            sync: deriveCounter\n        };\n    },\n    render() {\n        const { $slots } = this;\n        // eslint-disable-next-line @typescript-eslint/no-floating-promises\n        nextTick(() => this.sync({\n            showAllItemsBeforeCalculate: false\n        }));\n        // It shouldn't have border\n        return h('div', {\n            class: 'v-overflow',\n            ref: 'selfRef'\n        }, [\n            renderSlot($slots, 'default'),\n            // $slots.counter should only has 1 element\n            $slots.counter\n                ? $slots.counter()\n                : h('span', {\n                    style: {\n                        display: 'inline-block'\n                    },\n                    ref: 'counterRef'\n                }),\n            // $slots.tail should only has 1 element\n            $slots.tail ? $slots.tail() : null\n        ]);\n    }\n});\n","/* eslint-disable @typescript-eslint/strict-boolean-expressions */\n// ref https://www.w3.org/TR/wai-aria-practices-1.1/examples/dialog-modal/js/dialog.js\nfunction isHTMLElement(node) {\n    return node instanceof HTMLElement;\n}\nexport function focusFirstDescendant(node) {\n    for (let i = 0; i < node.childNodes.length; i++) {\n        const child = node.childNodes[i];\n        if (isHTMLElement(child)) {\n            if (attemptFocus(child) || focusFirstDescendant(child)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nexport function focusLastDescendant(element) {\n    for (let i = element.childNodes.length - 1; i >= 0; i--) {\n        const child = element.childNodes[i];\n        if (isHTMLElement(child)) {\n            if (attemptFocus(child) || focusLastDescendant(child)) {\n                return true;\n            }\n        }\n    }\n    return false;\n}\nfunction attemptFocus(element) {\n    if (!isFocusable(element)) {\n        return false;\n    }\n    try {\n        element.focus({ preventScroll: true });\n    }\n    catch (e) { }\n    return document.activeElement === element;\n}\nfunction isFocusable(element) {\n    if (element.tabIndex > 0 ||\n        (element.tabIndex === 0 && element.getAttribute('tabIndex') !== null)) {\n        return true;\n    }\n    if (element.getAttribute('disabled')) {\n        return false;\n    }\n    switch (element.nodeName) {\n        case 'A':\n            return (!!element.href &&\n                element.rel !== 'ignore');\n        case 'INPUT':\n            return (element.type !== 'hidden' &&\n                element.type !== 'file');\n        case 'BUTTON':\n        case 'SELECT':\n        case 'TEXTAREA':\n            return true;\n        default:\n            return false;\n    }\n}\n","import { h, defineComponent, ref, Fragment, onMounted, onBeforeUnmount, watch } from 'vue';\nimport { createId, getPreciseEventTarget } from 'seemly';\nimport { on, off } from 'evtd';\nimport { focusFirstDescendant, focusLastDescendant } from './utils';\nimport { resolveTo } from '../../shared';\nlet stack = [];\nexport const FocusTrap = defineComponent({\n    name: 'FocusTrap',\n    props: {\n        disabled: Boolean,\n        active: Boolean,\n        autoFocus: {\n            type: Boolean,\n            default: true\n        },\n        onEsc: Function,\n        initialFocusTo: String,\n        finalFocusTo: String,\n        returnFocusOnDeactivated: {\n            type: Boolean,\n            default: true\n        }\n    },\n    setup(props) {\n        const id = createId();\n        const focusableStartRef = ref(null);\n        const focusableEndRef = ref(null);\n        let activated = false;\n        let ignoreInternalFocusChange = false;\n        const lastFocusedElement = typeof document === 'undefined' ? null : document.activeElement;\n        function isCurrentActive() {\n            const currentActiveId = stack[stack.length - 1];\n            return currentActiveId === id;\n        }\n        function handleDocumentKeydown(e) {\n            var _a;\n            if (e.code === 'Escape') {\n                if (isCurrentActive()) {\n                    (_a = props.onEsc) === null || _a === void 0 ? void 0 : _a.call(props, e);\n                }\n            }\n        }\n        onMounted(() => {\n            watch(() => props.active, (value) => {\n                if (value) {\n                    activate();\n                    on('keydown', document, handleDocumentKeydown);\n                }\n                else {\n                    off('keydown', document, handleDocumentKeydown);\n                    if (activated) {\n                        deactivate();\n                    }\n                }\n            }, {\n                immediate: true\n            });\n        });\n        onBeforeUnmount(() => {\n            off('keydown', document, handleDocumentKeydown);\n            if (activated)\n                deactivate();\n        });\n        function handleDocumentFocus(e) {\n            if (ignoreInternalFocusChange)\n                return;\n            if (isCurrentActive()) {\n                const mainEl = getMainEl();\n                if (mainEl === null)\n                    return;\n                if (mainEl.contains(getPreciseEventTarget(e)))\n                    return;\n                // I don't handle shift + tab status since it's too tricky to handle\n                // Not impossible but I need to sleep\n                resetFocusTo('first');\n            }\n        }\n        function getMainEl() {\n            const focusableStartEl = focusableStartRef.value;\n            if (focusableStartEl === null)\n                return null;\n            let mainEl = focusableStartEl;\n            while (true) {\n                mainEl = mainEl.nextSibling;\n                if (mainEl === null)\n                    break;\n                if (mainEl instanceof Element && mainEl.tagName === 'DIV') {\n                    break;\n                }\n            }\n            return mainEl;\n        }\n        function activate() {\n            var _a;\n            if (props.disabled)\n                return;\n            stack.push(id);\n            if (props.autoFocus) {\n                const { initialFocusTo } = props;\n                if (initialFocusTo === undefined) {\n                    resetFocusTo('first');\n                }\n                else {\n                    (_a = resolveTo(initialFocusTo)) === null || _a === void 0 ? void 0 : _a.focus({ preventScroll: true });\n                }\n            }\n            activated = true;\n            document.addEventListener('focus', handleDocumentFocus, true);\n        }\n        function deactivate() {\n            var _a;\n            if (props.disabled)\n                return;\n            document.removeEventListener('focus', handleDocumentFocus, true);\n            stack = stack.filter((idInStack) => idInStack !== id);\n            if (isCurrentActive())\n                return;\n            const { finalFocusTo } = props;\n            if (finalFocusTo !== undefined) {\n                (_a = resolveTo(finalFocusTo)) === null || _a === void 0 ? void 0 : _a.focus({ preventScroll: true });\n            }\n            else if (props.returnFocusOnDeactivated) {\n                if (lastFocusedElement instanceof HTMLElement) {\n                    ignoreInternalFocusChange = true;\n                    lastFocusedElement.focus({ preventScroll: true });\n                    ignoreInternalFocusChange = false;\n                }\n            }\n        }\n        function resetFocusTo(target) {\n            if (!isCurrentActive())\n                return;\n            if (props.active) {\n                const focusableStartEl = focusableStartRef.value;\n                const focusableEndEl = focusableEndRef.value;\n                if (focusableStartEl !== null && focusableEndEl !== null) {\n                    const mainEl = getMainEl();\n                    if (mainEl == null || mainEl === focusableEndEl) {\n                        ignoreInternalFocusChange = true;\n                        focusableStartEl.focus({ preventScroll: true });\n                        ignoreInternalFocusChange = false;\n                        return;\n                    }\n                    ignoreInternalFocusChange = true;\n                    const focused = target === 'first'\n                        ? focusFirstDescendant(mainEl)\n                        : focusLastDescendant(mainEl);\n                    ignoreInternalFocusChange = false;\n                    if (!focused) {\n                        ignoreInternalFocusChange = true;\n                        focusableStartEl.focus({ preventScroll: true });\n                        ignoreInternalFocusChange = false;\n                    }\n                }\n            }\n        }\n        function handleStartFocus(e) {\n            if (ignoreInternalFocusChange)\n                return;\n            const mainEl = getMainEl();\n            if (mainEl === null)\n                return;\n            if (e.relatedTarget !== null && mainEl.contains(e.relatedTarget)) {\n                // if it comes from inner, focus last\n                resetFocusTo('last');\n            }\n            else {\n                // otherwise focus first\n                resetFocusTo('first');\n            }\n        }\n        function handleEndFocus(e) {\n            if (ignoreInternalFocusChange)\n                return;\n            if (e.relatedTarget !== null &&\n                e.relatedTarget === focusableStartRef.value) {\n                // if it comes from first, focus last\n                resetFocusTo('last');\n            }\n            else {\n                // otherwise focus first\n                resetFocusTo('first');\n            }\n        }\n        return {\n            focusableStartRef,\n            focusableEndRef,\n            focusableStyle: 'position: absolute; height: 0; width: 0;',\n            handleStartFocus,\n            handleEndFocus\n        };\n    },\n    render() {\n        const { default: defaultSlot } = this.$slots;\n        if (defaultSlot === undefined)\n            return null;\n        if (this.disabled)\n            return defaultSlot();\n        const { active, focusableStyle } = this;\n        return h(Fragment, null, [\n            h('div', {\n                'aria-hidden': 'true',\n                tabindex: active ? '0' : '-1',\n                ref: 'focusableStartRef',\n                style: focusableStyle,\n                onFocus: this.handleStartFocus\n            }),\n            defaultSlot(),\n            h('div', {\n                'aria-hidden': 'true',\n                style: focusableStyle,\n                ref: 'focusableEndRef',\n                tabindex: active ? '0' : '-1',\n                onFocus: this.handleEndFocus\n            })\n        ]);\n    }\n});\n"],"names":["getSlot","scope","slots","slotName","slot","flatten","vNodes","filterCommentNode","result","vNode","createTextVNode","Fragment","Comment","getFirstVNode","content","viewMeasurer","ensureViewBoundingRect","style","getPointRect","x","y","viewRect","getRect","el","elRect","getParentNode","node","getScrollParent","parentNode","overflow","overflowX","overflowY","Binder","defineComponent","props","_a","provide","getCurrentInstance","VBinder","inject","targetRef","ref","setTargetRef","scrollableNodes","ensureScrollListener","cursor","on","onScroll","removeScrollListeners","off","followerScrollListeners","addScrollListener","listener","removeScrollListener","beforeNextFrameOnce","onScrollRaf","followerResizeListeners","addResizeListener","onResize","removeResizeListener","onBeforeUnmount","VTarget","syncTarget","setTargetDirective","withDirectives","warn","location","message","c","CssRender","cssrAnchorMetaName","lowBit","FinweckTree","l","min","ft","i","n","ret","threshold","r","m","sumM","resolveTo","selector","LazyTeleport","useFalseUntilTruthy","toRef","computed","to","h","Teleport","oppositionPositions","oppositeAligns","propToCompare","transformOrigins","overlapTransformOrigin","oppositeAlignCssPositionProps","keepOffsetDirection","cssPositionToOppositeAlign","getPlacementAndOffsetOfFollower","placement","targetRect","followerRect","shift","flip","overlap","position","align","properAlign","properOffset","deriveOffset","oppositeAlignCssSizeProp","alignCssPositionProp","offsetVertically","left","top","diff","oppositeAlignCssPositionProp","currentAlignCssPositionProp","followerOverTargetSize","possibleAlternativeAlignCssPositionProp1","possibleAlternativeAlignCssPositionProp2","alternativeAlignCssSizeProp","properPosition","getProperTransformOrigin","getOffset","offsetRect","offsetTopToStandardPlacement","offsetLeftToStandardPlacement","VFollower","mergedEnabledRef","useMemo","followerRef","offsetContainerRef","ensureListeners","syncTrigger","syncPosition","removeListeners","onMounted","ssrAdapter","useSsrAdapter","onFontsReady","follower","target","width","minWidth","internalShift","offsetContainerRect","properPlacement","properTransformOrigin","transform","watch","value","syncOnNextTick","nextTick","e","prop","isMountedRef","useIsMounted","mergedToRef","_b","zindexable","ResizeObserverDelegate","PolyfillResizeObserver","entries","entry","handler","resizeObserverManager","VResizeObserver","registered","proxy","handleResize","delegate","renderSlot","maybeTouch","ensureMaybeTouch","wheelScale","ensureWheelScale","styles","VVirtualList","defaultScrollIndex","defaultScrollKey","scrollTo","isDeactivated","activateStateInitialized","onActivated","scrollTopRef","scrollLeft","onDeactivated","keyIndexMapRef","map","keyField","item","index","listElRef","listHeightRef","keyToHeightOffset","finweckTreeRef","items","itemSize","key","heightOffset","finweckTreeUpdateTrigger","startIndexRef","depx","viewportItemsRef","listHeight","startIndex","endIndex","viewportItems","options","scrollToPosition","behavior","debounce","scrollToIndex","toIndex","anchorIndex","anchorTimerId","targetTop","scrollTop","offsetHeight","handleItemResize","_c","isHideByVShow","previousHeight","height","delta","listEl","previousHeightSum","syncViewport","mayUseWheel","wheelCatched","handleListScroll","handleListWheel","handleListResize","itemResizable","pxfy","keyToIndex","visibleItemsTag","mergeProps","itemVNode","hiddenAttr","VOverflow","selfRef","counterRef","deriveCounter","self","getCounter","getTail","counter","children","child","containerWidth","childWidths","tail","childWidthSum","len","childWidth","updateCounter","j","restCount","counterWidth","onUpdateCount","onUpdateOverflow","$slots","isHTMLElement","focusFirstDescendant","attemptFocus","focusLastDescendant","element","isFocusable","stack","FocusTrap","id","createId","focusableStartRef","focusableEndRef","activated","ignoreInternalFocusChange","lastFocusedElement","isCurrentActive","handleDocumentKeydown","activate","deactivate","handleDocumentFocus","mainEl","getMainEl","getPreciseEventTarget","resetFocusTo","focusableStartEl","initialFocusTo","idInStack","finalFocusTo","focusableEndEl","focused","handleStartFocus","handleEndFocus","defaultSlot","active","focusableStyle"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]}