import{g as x,M as Z}from"./splitpanes-D-4vq_pJ.js";import{l as G}from"./json5-8HslT92O.js";import{j as D}from"./json-pointer-DT_4Huoh.js";import{j as H}from"./jsonpath-DagGPREx.js";import{d as Y,r as p,w as I,O as j,M as o,I as r,o as f,L as l,a as e,b as s,P as T,E as ee,Q as E,c as le,n as se}from"./@vue-DLCpZ3se.js";import{c as N,e as $,d as P,f as te,g as L,h as ae,i as ne,j as re,k as R,l as M,m as g}from"./naive-ui-BblVSB66.js";import{a as ie}from"./@vicons-C7SrlLmH.js";import"./@babel-BosuxZz1.js";import"./foreach-BOrx_fet.js";import"./vooks-CX2-nYRb.js";import"./evtd-CI_DDEu_.js";import"./vueuc-BqACp4MS.js";import"./seemly-B1UhY21x.js";import"./@css-render-Cg_he9eR.js";import"./vdirs-DL8EOfHr.js";import"./@juggle-C8OzoCMD.js";import"./css-render-Ct37b3-v.js";import"./@emotion-WldOFDRm.js";import"./treemate-HRdUPn5m.js";import"./date-fns-x7VUUoCw.js";import"./lodash-es-CqLjCvqY.js";const oe="data:image/svg+xml,%3csvg%20fill='none'%20height='24'%20viewBox='0%200%2024%2024'%20width='24'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23292d32'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20d='m21.97%2015v-6c0-5-2-7-7-7h-6.00003c-5%200-7%202-7%207v6c0%205%202%207%207%207h6.00003c5%200%207-2%207-7z'/%3e%3cpath%20d='m7.96997%202v20'/%3e%3cpath%20d='m14.97%209.43994-2.56%202.55996%202.56%202.56'/%3e%3c/g%3e%3c/svg%3e",ue="data:image/svg+xml,%3csvg%20fill='none'%20height='24'%20viewBox='0%200%2024%2024'%20width='24'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23292d32'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20d='m21.97%2015v-6c0-5-2-7-7-7h-6.00003c-5%200-7%202-7%207v6c0%205%202%207%207%207h6.00003c5%200%207-2%207-7z'/%3e%3cpath%20d='m14.97%202v20'/%3e%3cpath%20d='m7.96997%209.43994%202.56003%202.55996-2.56003%202.56'/%3e%3c/g%3e%3c/svg%3e",ce=["src"],pe=["src"],de={style:{display:"block",width:"calc(100% - 20px)",margin:"10px auto"}},me=e("p",null,[s("A JSON Pointer is a list of zero-to-many tokens, each prefixed by "),e("code",null,"/"),s(". Each token can be a string or a number. For example, given a JSON: ")],-1),he=e("div",{class:"fragment"},[e("div",{class:"line"},"{"),e("div",{class:"line"},' "foo" : ["bar", "baz"],'),e("div",{class:"line"},' "pi" : 3.1416'),e("div",{class:"line"},"}")],-1),ve=e("p",null,"The following JSON Pointers resolve this JSON as:",-1),fe=e("ol",{type:"1"},[e("li",null,[e("code",null,'"/foo"'),s(" → "),e("code",null,'[ "bar", "baz" ]')]),e("li",null,[e("code",null,'"/foo/0"'),s(" → "),e("code",null,'"bar"')]),e("li",null,[e("code",null,'"/foo/1"'),s(" → "),e("code",null,'"baz"')]),e("li",null,[e("code",null,'"/pi"'),s(" → "),e("code",null,"3.1416")])],-1),ge=e("p",null,[s("Note that, an empty JSON Pointer "),e("code",null,'""'),s(" (zero token) resolves to the whole JSON.")],-1),ye=e("a",{href:"https://rapidjson.org/md_doc_pointer.html"},"https://rapidjson.org/md_doc_pointer.html",-1),_e=e("pre",{style:{margin:"0"}},[e("code",{class:"lang-json"},[e("span",null,[s(`{
    `),e("span",{class:"hljs-attr"},'"Source"'),s(": "),e("span",{class:"hljs-string"},'"Server-01"'),s(`,
    `),e("span",{class:"hljs-attr"},'"Timestamp"'),s(": "),e("span",{class:"hljs-string"},'"2023-07-25T09:15:32.123Z"'),s(`,
    `),e("span",{class:"hljs-attr"},'"Log Level"'),s(": "),e("span",{class:"hljs-string"},'"INFO"'),s(`,
    `),e("span",{class:"hljs-attr"},'"Message"'),s(": "),e("span",{class:"hljs-string"},'"Application started successfully."'),s(`,
    `),e("span",{class:"hljs-attr"},'"Details"'),s(`: {
      `),e("span",{class:"hljs-attr"},'"Service"'),s(": "),e("span",{class:"hljs-string"},'"AuthService"'),s(`,
      `),e("span",{class:"hljs-attr"},'"Endpoint"'),s(": "),e("span",{class:"hljs-string"},'"/api/login"'),s(`,
      `),e("span",{class:"hljs-attr"},'"Response Code"'),s(": "),e("span",{class:"hljs-number"},"200"),s(`,
      `),e("span",{class:"hljs-attr"},'"Response Time"'),s(": "),e("span",{class:"hljs-number"},"54.21"),s(`,
      `),e("span",{class:"hljs-attr"},'"User"'),s(`: {
        `),e("span",{class:"hljs-attr"},'"User ID"'),s(": "),e("span",{class:"hljs-string"},'"user123"'),s(`,
        `),e("span",{class:"hljs-attr"},'"Username"'),s(": "),e("span",{class:"hljs-string"},'"kiana_anderson"'),s(`,
        `),e("span",{class:"hljs-attr"},'"IP Address"'),s(": "),e("span",{class:"hljs-string"},'"192.168.1.100"'),s(`
      }
    }
  }`)]),s(`
`)]),s(`
`)],-1),Se=e("p",null,"您可以使用 JSONPath 表示法來代表每個欄位，如下所示：",-1),be=e("pre",{class:"has-inner-focus"},[e("code",{class:"lang-kusto","data-author-content":`"$.Source"                     // Source field
"$.Timestamp"                  // Timestamp field
"$['Log Level']"               // Log Level field
"$.Message"                    // Message field
"$.Details.Service"            // Service field
"$.Details.Endpoint"           // Endpoint field
"$.Details['Response Code']"   // Response Code field
"$.Details['Response Time']"   // Response Time field
"$.Details.User['User ID']"    // User ID field
"$.Details.User.Username"      // Username field
"$.Details.User['IP Address']" // IP Address field
`},[e("span",null,[e("span",{class:"hljs-string"},'"$.Source"'),s("                     "),e("span",{class:"hljs-comment"},"// Source field"),s(`
`),e("span",{class:"hljs-string"},'"$.Timestamp"'),s("                  "),e("span",{class:"hljs-comment"},"// Timestamp field"),s(`
`),e("span",{class:"hljs-string"},`"$['Log Level']"`),s("               "),e("span",{class:"hljs-comment"},"// Log Level field"),s(`
`),e("span",{class:"hljs-string"},'"$.Message"'),s("                    "),e("span",{class:"hljs-comment"},"// Message field"),s(`
`),e("span",{class:"hljs-string"},'"$.Details.Service"'),s("            "),e("span",{class:"hljs-comment"},"// Service field"),s(`
`),e("span",{class:"hljs-string"},'"$.Details.Endpoint"'),s("           "),e("span",{class:"hljs-comment"},"// Endpoint field"),s(`
`),e("span",{class:"hljs-string"},`"$.Details['Response Code']"`),s("   "),e("span",{class:"hljs-comment"},"// Response Code field"),s(`
`),e("span",{class:"hljs-string"},`"$.Details['Response Time']"`),s("   "),e("span",{class:"hljs-comment"},"// Response Time field"),s(`
`),e("span",{class:"hljs-string"},`"$.Details.User['User ID']"`),s("    "),e("span",{class:"hljs-comment"},"// User ID field"),s(`
`),e("span",{class:"hljs-string"},'"$.Details.User.Username"'),s("      "),e("span",{class:"hljs-comment"},"// Username field"),s(`
`),e("span",{class:"hljs-string"},`"$.Details.User['IP Address']"`),s(),e("span",{class:"hljs-comment"},"// IP Address field"),s(`
`)])])],-1),je=e("a",{class:"n-a",href:"https://learn.microsoft.com/zh-tw/azure/data-explorer/kusto/query/jsonpath"},"https://learn.microsoft.com/zh-tw/azure/data-explorer/kusto/query/jsonpath",-1),Ne={key:0,style:{"margin-top":"5px"}},ke=e("label",null,"JSON",-1),Qe=Y({__name:"JsonTable",setup(ze){const k=p(!1),y=p(localStorage.getItem("input_str")||"");let d=p(null);const c=p(null),J=p(""),w=[{label:"JSON Pointer",value:"JSON Pointer"},{label:"JSON Path",value:"JSON Path"}],m=p(w[0].value),u=p(""),B=()=>{if(m.value==="JSON Pointer"){const a=u.value=="/"?"":u.value;return c.value=C(a,d.value),c.value?(console.log("sub_value",c),Array.isArray(c.value)?[a+"/0"]:Object.keys(c.value).map(t=>a+"/"+t)):[]}return[]};I([y,k],async(a,t)=>{k.value&&A()});function A(){J.value=y.value}const _=p(""),F=JSON.parse(localStorage.getItem("json_table_pannels")||JSON.stringify([{close:!1,size:30,default_size:30},{close:!1,size:35,default_size:35},{close:!1,size:30,default_size:30}])),h=p(F);async function U(a){h.value[a].close=!h.value[a].close;const t=h.value.map(i=>i.close?0:i.default_size);h.value.forEach((i,v)=>{i.size=n(v)}),localStorage.setItem("json_table_pannels",JSON.stringify(h.value));function n(i){const v=t.reduce((W,X)=>W+X,0);return Math.floor(t[i]/v*100)}}function V(a){try{d.value=G.parse(a);const t=JSON.stringify(d.value,null,4);y.value=t,localStorage.setItem("input_str",a),u.value=u.value+""}catch{d.value=null;return}return S(O(d.value))}function z(a,t){a.stopPropagation(),m.value="JSON Pointer",c.value=C(t,d.value),u.value=t,console.log(t)}function S(a,t=""){if(a.type=="Array")return l(g,{"single-line":!1,size:"small","data-pointer":t},{default:()=>[l("thead",{onClick:n=>z(n,t)},[l("tr",null,[l("th",null,[s("Array")])])]),l("tbody",null,[a.value.map((n,i)=>l("tr",null,[l("td",null,[S(n,`${t}/${i}`)])]))])]});if(a.type=="sameArrayField")return l(g,{"single-line":!1,size:"small"},{default:()=>[l("thead",null,[l("tr",null,[a.value[0].type==="Object"?a.value[0].value.map(n=>l("th",null,[n.name])):l("th",null,[a.value[0].type])])]),l("tbody",null,[a.value.map((n,i)=>l("tr",null,[n.type==="Object"?n.value.map(v=>l("td",null,[S(v.value,`${t}/${i}${v.value.type=="Primitive"?"":"/"+v.name}`)])):l("td",null,[S(n,`${t}/${i}`)])]))])]});if(a.type=="Object")return l(g,{"single-line":!1,size:"small"},{default:()=>[l("tr",{"data-pointer":t,onClick:n=>z(n,t)},[l("th",null,[s("Key")]),l("th",null,[s("Value")])]),l("tbody",null,[a.value.map(n=>l("tr",{onClick:i=>z(i,t+`/${n.name}`)},[l("td",null,[n.name]),l("td",null,[S(n.value,`${t}/${n.name}`)])]))])]});if(a.type=="Primitive")return l("span",{onClick:n=>z(n,t)},[a.value.toString()])}function b(a){if(a.type=="Array")return l(g,{"single-line":!1,size:"small"},{default:()=>[l("thead",null,[l("tr",null,[l("th",null,[s("Array")])])]),l("tbody",null,[a.value.map(t=>l("tr",null,[l("td",null,[b(t)])]))])]});if(a.type=="sameArrayField")return l(g,{"single-line":!1,size:"small"},{default:()=>[l("thead",null,[l("tr",null,[a.value[0].type==="Object"?a.value[0].value.map(t=>l("th",null,[t.name])):l("th",null,[a.value[0].type])])]),l("tbody",null,[a.value.map(t=>l("tr",null,[t.type==="Object"?t.value.map(n=>l("td",null,[b(n.value)])):l("td",null,[b(t)])]))])]});if(a.type=="Object")return l(g,{"single-line":!1,size:"small"},{default:()=>[l("tr",null,[l("th",null,[s("Key")]),l("th",null,[s("Value")])]),l("tbody",null,[a.value.map(t=>l("tr",null,[l("td",null,[t.name]),l("td",null,[b(t.value)])]))])]});if(a.type=="Primitive")return se("span",a.value.toString())}function O(a){if(a===null)return{type:"Primitive",value:"null"};if(Array.isArray(a))return{type:q(a)?"sameArrayField":"Array",value:a.map(t=>O(t))};if(typeof a=="object")return{type:"Object",value:Object.entries(a).map(([t,n])=>({name:t,value:O(n)}))};if(K(a))return{type:"Primitive",value:a}}function q(a){return a.map(t=>Object.keys(t).join("|")).every((t,n,i)=>t===i[0])&&!Array.isArray(a[0])&&a.length>1}function K(a){return["string","number","bigint","boolean","undefined","symbol","null","object"].includes(typeof a)}I([u,m],async(a,t)=>{try{let n;switch(m.value){case"JSON Pointer":n=D.get(d.value||{},u.value);break;case"JSON Path":n=H.query(d.value,u.value);break;default:break}c.value=n,_.value=JSON.stringify(n)}catch(n){_.value=n.toString()}});function C(a,t){try{return D.get(t,a)}catch{return}}function Q(){try{return c.value?b(O(c.value)):l("p",null,[s("empty object")])}catch(a){return l("p",null,[a.toString()])}}return(a,t)=>(f(),j(r(N),{vertical:"",style:{width:"100%",overflow:"scroll",gap:"0"}},{default:o(()=>[l(r(N),{justify:"space-between",style:{padding:"4px 6px","flex-grow":"1","border-bottom":"1px solid var(--n-border-color)"}},{default:o(()=>[l(r(N),{justify:"start",style:{"column-gap":"2px","align-items":"center"}},{default:o(()=>[l(r($),{onClick:t[0]||(t[0]=n=>U(0))},{default:o(()=>[l(r(P),{size:"24"},{default:o(()=>[e("img",{src:r(oe),style:{width:"100%"}},null,8,ce)]),_:1})]),_:1}),l(r($),{onClick:t[1]||(t[1]=n=>A())},{default:o(()=>[s("Run "),l(r(P),{size:"20",style:{"margin-left":"5px"}},{default:o(()=>[l(r(ie))]),_:1})]),_:1}),l(r(te),{size:"small",label:"auto",checked:k.value,"onUpdate:checked":t[2]||(t[2]=n=>k.value=n)},null,8,["checked"])]),_:1}),l(r($),{justify:"end",onClick:t[3]||(t[3]=n=>U(2))},{default:o(()=>[l(r(P),{size:"24"},{default:o(()=>[e("img",{src:r(ue),style:{width:"100%"}},null,8,pe)]),_:1})]),_:1})]),_:1}),l(r(Z),{style:{height:"calc(100% - var(--header-height))"}},{default:o(()=>[l(r(x),{size:h.value[0].size},{default:o(()=>[l(r(L),{class:"code_text",style:{height:"100%",overflow:"scroll"},value:y.value,"onUpdate:value":t[4]||(t[4]=n=>y.value=n),type:"textarea",placeholder:'JSON Text { "a" : "123" }'},null,8,["value"])]),_:1},8,["size"]),l(r(x),{size:h.value[1].size,class:"json_table"},{default:o(()=>[(f(),j(T(()=>V(J.value))))]),_:1},8,["size"]),l(r(x),{size:h.value[2].size,style:{height:"100%","align-items":"flex-start"}},{default:o(()=>[l(r(N),{vertical:"",style:{height:"100%",width:"100%",overflow:"scroll"}},{default:o(()=>{var n;return[e("div",de,[l(r(N),{style:{"flex-direction":"row"}},{default:o(()=>[l(r(ae),{value:m.value,"onUpdate:value":t[5]||(t[5]=i=>m.value=i),style:ee({width:`calc(${Math.max(...w.map(i=>i.label.length))/1.3}rem)`}),options:w},null,8,["value","style"]),l(r(ne),{style:{"margin-bottom":"15px",width:"max-content","flex-grow":"1"},value:u.value,"onUpdate:value":t[6]||(t[6]=i=>u.value=i),"input-props":{autocomplete:"disabled"},options:B(),placeholder:"JSON Pointer e.g. /foo/bar/0",clearable:""},null,8,["value","options"])]),_:1}),l(r(re),null,{default:o(()=>[m.value=="JSON Pointer"?(f(),j(r(R),{key:0,title:"What's JSON Pointer?",name:"1"},{default:o(()=>[l(r(M),{title:"Example"},{default:o(()=>[me,he,ve,fe,ge,ye]),_:1})]),_:1})):m.value=="JSON Path"?(f(),j(r(R),{key:1,title:"JSONPath - XPath for JSON",name:"1"},{default:o(()=>[l(r(M),{title:"Example"},{default:o(()=>[_e,Se,be,je]),_:1})]),_:1})):E("",!0)]),_:1}),(f(),j(T(()=>Q()),{style:{margin:"1rem auto",display:"block"}})),((n=_.value)==null?void 0:n.length)>0?(f(),le("div",Ne,[ke,l(r(L),{class:"code_text",value:_.value,"onUpdate:value":t[7]||(t[7]=i=>_.value=i),type:"textarea"},null,8,["value"])])):E("",!0)])]}),_:1})]),_:1},8,["size"])]),_:1})]),_:1}))}});export{Qe as default};
//# sourceMappingURL=JsonTable-Iu4Rgj4N.js.map
