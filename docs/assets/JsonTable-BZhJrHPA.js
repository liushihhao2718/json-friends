import{g as $,M as Z}from"./splitpanes-D-4vq_pJ.js";import{l as G}from"./json5-8HslT92O.js";import{j as I}from"./json-pointer-DT_4Huoh.js";import{j as H}from"./jsonpath-DagGPREx.js";import{d as Y,r as p,f as ee,w as P,O as N,M as o,I as r,o as g,L as l,a as e,b as t,P as T,E as le,Q as E,c as te,n as se}from"./@vue-DLCpZ3se.js";import{c as k,e as J,d as A,f as ae,g as L,h as ne,i as re,j as ie,k as R,l as M,m as y}from"./naive-ui-BblVSB66.js";import{a as oe}from"./@vicons-C7SrlLmH.js";import"./@babel-BosuxZz1.js";import"./foreach-BOrx_fet.js";import"./vooks-CX2-nYRb.js";import"./evtd-CI_DDEu_.js";import"./vueuc-BqACp4MS.js";import"./seemly-B1UhY21x.js";import"./@css-render-Cg_he9eR.js";import"./vdirs-DL8EOfHr.js";import"./@juggle-C8OzoCMD.js";import"./css-render-Ct37b3-v.js";import"./@emotion-WldOFDRm.js";import"./treemate-HRdUPn5m.js";import"./date-fns-x7VUUoCw.js";import"./lodash-es-CqLjCvqY.js";const ue="data:image/svg+xml,%3csvg%20fill='none'%20height='24'%20viewBox='0%200%2024%2024'%20width='24'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23292d32'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20d='m21.97%2015v-6c0-5-2-7-7-7h-6.00003c-5%200-7%202-7%207v6c0%205%202%207%207%207h6.00003c5%200%207-2%207-7z'/%3e%3cpath%20d='m7.96997%202v20'/%3e%3cpath%20d='m14.97%209.43994-2.56%202.55996%202.56%202.56'/%3e%3c/g%3e%3c/svg%3e",ce="data:image/svg+xml,%3csvg%20fill='none'%20height='24'%20viewBox='0%200%2024%2024'%20width='24'%20xmlns='http://www.w3.org/2000/svg'%3e%3cg%20stroke='%23292d32'%20stroke-linecap='round'%20stroke-linejoin='round'%20stroke-width='1.5'%3e%3cpath%20d='m21.97%2015v-6c0-5-2-7-7-7h-6.00003c-5%200-7%202-7%207v6c0%205%202%207%207%207h6.00003c5%200%207-2%207-7z'/%3e%3cpath%20d='m14.97%202v20'/%3e%3cpath%20d='m7.96997%209.43994%202.56003%202.55996-2.56003%202.56'/%3e%3c/g%3e%3c/svg%3e",pe=["src"],de=["src"],me={style:{display:"block",width:"calc(100% - 20px)",margin:"10px auto"}},he=e("p",null,[t("A JSON Pointer is a list of zero-to-many tokens, each prefixed by "),e("code",null,"/"),t(". Each token can be a string or a number. For example, given a JSON: ")],-1),ve=e("div",{class:"fragment"},[e("div",{class:"line"},"{"),e("div",{class:"line"},' "foo" : ["bar", "baz"],'),e("div",{class:"line"},' "pi" : 3.1416'),e("div",{class:"line"},"}")],-1),fe=e("p",null,"The following JSON Pointers resolve this JSON as:",-1),ge=e("ol",{type:"1"},[e("li",null,[e("code",null,'"/foo"'),t(" → "),e("code",null,'[ "bar", "baz" ]')]),e("li",null,[e("code",null,'"/foo/0"'),t(" → "),e("code",null,'"bar"')]),e("li",null,[e("code",null,'"/foo/1"'),t(" → "),e("code",null,'"baz"')]),e("li",null,[e("code",null,'"/pi"'),t(" → "),e("code",null,"3.1416")])],-1),ye=e("p",null,[t("Note that, an empty JSON Pointer "),e("code",null,'""'),t(" (zero token) resolves to the whole JSON.")],-1),_e=e("a",{href:"https://rapidjson.org/md_doc_pointer.html"},"https://rapidjson.org/md_doc_pointer.html",-1),Se=e("pre",{style:{margin:"0"}},[e("code",{class:"lang-json"},[e("span",null,[t(`{
    `),e("span",{class:"hljs-attr"},'"Source"'),t(": "),e("span",{class:"hljs-string"},'"Server-01"'),t(`,
    `),e("span",{class:"hljs-attr"},'"Timestamp"'),t(": "),e("span",{class:"hljs-string"},'"2023-07-25T09:15:32.123Z"'),t(`,
    `),e("span",{class:"hljs-attr"},'"Log Level"'),t(": "),e("span",{class:"hljs-string"},'"INFO"'),t(`,
    `),e("span",{class:"hljs-attr"},'"Message"'),t(": "),e("span",{class:"hljs-string"},'"Application started successfully."'),t(`,
    `),e("span",{class:"hljs-attr"},'"Details"'),t(`: {
      `),e("span",{class:"hljs-attr"},'"Service"'),t(": "),e("span",{class:"hljs-string"},'"AuthService"'),t(`,
      `),e("span",{class:"hljs-attr"},'"Endpoint"'),t(": "),e("span",{class:"hljs-string"},'"/api/login"'),t(`,
      `),e("span",{class:"hljs-attr"},'"Response Code"'),t(": "),e("span",{class:"hljs-number"},"200"),t(`,
      `),e("span",{class:"hljs-attr"},'"Response Time"'),t(": "),e("span",{class:"hljs-number"},"54.21"),t(`,
      `),e("span",{class:"hljs-attr"},'"User"'),t(`: {
        `),e("span",{class:"hljs-attr"},'"User ID"'),t(": "),e("span",{class:"hljs-string"},'"user123"'),t(`,
        `),e("span",{class:"hljs-attr"},'"Username"'),t(": "),e("span",{class:"hljs-string"},'"kiana_anderson"'),t(`,
        `),e("span",{class:"hljs-attr"},'"IP Address"'),t(": "),e("span",{class:"hljs-string"},'"192.168.1.100"'),t(`
      }
    }
  }`)]),t(`
`)]),t(`
`)],-1),be=e("p",null,"您可以使用 JSONPath 表示法來代表每個欄位，如下所示：",-1),je=e("pre",{class:"has-inner-focus"},[e("code",{class:"lang-kusto","data-author-content":`"$.Source"                     // Source field
"$.Timestamp"                  // Timestamp field
"$['Log Level']"               // Log Level field
"$.Message"                    // Message field
"$.Details.Service"            // Service field
"$.Details.Endpoint"           // Endpoint field
"$.Details['Response Code']"   // Response Code field
"$.Details['Response Time']"   // Response Time field
"$.Details.User['User ID']"    // User ID field
"$.Details.User.Username"      // Username field
"$.Details.User['IP Address']" // IP Address field
`},[e("span",null,[e("span",{class:"hljs-string"},'"$.Source"'),t("                     "),e("span",{class:"hljs-comment"},"// Source field"),t(`
`),e("span",{class:"hljs-string"},'"$.Timestamp"'),t("                  "),e("span",{class:"hljs-comment"},"// Timestamp field"),t(`
`),e("span",{class:"hljs-string"},`"$['Log Level']"`),t("               "),e("span",{class:"hljs-comment"},"// Log Level field"),t(`
`),e("span",{class:"hljs-string"},'"$.Message"'),t("                    "),e("span",{class:"hljs-comment"},"// Message field"),t(`
`),e("span",{class:"hljs-string"},'"$.Details.Service"'),t("            "),e("span",{class:"hljs-comment"},"// Service field"),t(`
`),e("span",{class:"hljs-string"},'"$.Details.Endpoint"'),t("           "),e("span",{class:"hljs-comment"},"// Endpoint field"),t(`
`),e("span",{class:"hljs-string"},`"$.Details['Response Code']"`),t("   "),e("span",{class:"hljs-comment"},"// Response Code field"),t(`
`),e("span",{class:"hljs-string"},`"$.Details['Response Time']"`),t("   "),e("span",{class:"hljs-comment"},"// Response Time field"),t(`
`),e("span",{class:"hljs-string"},`"$.Details.User['User ID']"`),t("    "),e("span",{class:"hljs-comment"},"// User ID field"),t(`
`),e("span",{class:"hljs-string"},'"$.Details.User.Username"'),t("      "),e("span",{class:"hljs-comment"},"// Username field"),t(`
`),e("span",{class:"hljs-string"},`"$.Details.User['IP Address']"`),t(),e("span",{class:"hljs-comment"},"// IP Address field"),t(`
`)])])],-1),Ne=e("a",{class:"n-a",href:"https://learn.microsoft.com/zh-tw/azure/data-explorer/kusto/query/jsonpath"},"https://learn.microsoft.com/zh-tw/azure/data-explorer/kusto/query/jsonpath",-1),ke={key:0,style:{"margin-top":"5px"}},ze=e("label",null,"JSON",-1),We=Y({__name:"JsonTable",setup(Oe){const v=p(JSON.parse(localStorage.getItem("json2table_auto")||"false")),_=p(localStorage.getItem("input_str")||"");let d=p(null);const c=p(null),U=p(""),w=[{label:"JSON Pointer",value:"JSON Pointer"},{label:"JSON Path",value:"JSON Path"}],m=p(w[0].value),u=p(""),B=()=>{if(m.value==="JSON Pointer"){const a=u.value=="/"?"":u.value;return c.value=D(a,d.value),c.value?(console.log("sub_value",c),Array.isArray(c.value)?[a+"/0"]:Object.keys(c.value).map(s=>a+"/"+s)):[]}return[]};ee(()=>{v.value&&x()}),P([v],async()=>{localStorage.setItem("json2table_auto",v.value.toString())}),P([_,v],async(a,s)=>{v.value&&x()});function x(){U.value=_.value}const S=p(""),F=JSON.parse(localStorage.getItem("json_table_pannels")||JSON.stringify([{close:!1,size:30,default_size:30},{close:!1,size:35,default_size:35},{close:!1,size:30,default_size:30}])),h=p(F);async function C(a){h.value[a].close=!h.value[a].close;const s=h.value.map(i=>i.close?0:i.default_size);h.value.forEach((i,f)=>{i.size=n(f)}),localStorage.setItem("json_table_pannels",JSON.stringify(h.value));function n(i){const f=s.reduce((W,X)=>W+X,0);return Math.floor(s[i]/f*100)}}function V(a){try{d.value=G.parse(a);const s=JSON.stringify(d.value,null,4);_.value=s,localStorage.setItem("input_str",a),u.value=u.value+""}catch{d.value=null;return}return b(O(d.value))}function z(a,s){a.stopPropagation(),m.value="JSON Pointer",c.value=D(s,d.value),u.value=s,console.log(s)}function b(a,s=""){if(a.type=="Array")return l(y,{"single-line":!1,size:"small","data-pointer":s},{default:()=>[l("thead",{onClick:n=>z(n,s)},[l("tr",null,[l("th",null,[t("Array")])])]),l("tbody",null,[a.value.map((n,i)=>l("tr",null,[l("td",null,[b(n,`${s}/${i}`)])]))])]});if(a.type=="sameArrayField")return l(y,{"single-line":!1,size:"small"},{default:()=>[l("thead",null,[l("tr",null,[a.value[0].type==="Object"?a.value[0].value.map(n=>l("th",null,[n.name])):l("th",null,[a.value[0].type])])]),l("tbody",null,[a.value.map((n,i)=>l("tr",null,[n.type==="Object"?n.value.map(f=>l("td",null,[b(f.value,`${s}/${i}${f.value.type=="Primitive"?"":"/"+f.name}`)])):l("td",null,[b(n,`${s}/${i}`)])]))])]});if(a.type=="Object")return l(y,{"single-line":!1,size:"small"},{default:()=>[l("tr",{"data-pointer":s,onClick:n=>z(n,s)},[l("th",null,[t("Key")]),l("th",null,[t("Value")])]),l("tbody",null,[a.value.map(n=>l("tr",{onClick:i=>z(i,s+`/${n.name}`)},[l("td",null,[n.name]),l("td",null,[b(n.value,`${s}/${n.name}`)])]))])]});if(a.type=="Primitive")return l("span",{onClick:n=>z(n,s)},[a.value.toString()])}function j(a){if(a.type=="Array")return l(y,{"single-line":!1,size:"small"},{default:()=>[l("thead",null,[l("tr",null,[l("th",null,[t("Array")])])]),l("tbody",null,[a.value.map(s=>l("tr",null,[l("td",null,[j(s)])]))])]});if(a.type=="sameArrayField")return l(y,{"single-line":!1,size:"small"},{default:()=>[l("thead",null,[l("tr",null,[a.value[0].type==="Object"?a.value[0].value.map(s=>l("th",null,[s.name])):l("th",null,[a.value[0].type])])]),l("tbody",null,[a.value.map(s=>l("tr",null,[s.type==="Object"?s.value.map(n=>l("td",null,[j(n.value)])):l("td",null,[j(s)])]))])]});if(a.type=="Object")return l(y,{"single-line":!1,size:"small"},{default:()=>[l("tr",null,[l("th",null,[t("Key")]),l("th",null,[t("Value")])]),l("tbody",null,[a.value.map(s=>l("tr",null,[l("td",null,[s.name]),l("td",null,[j(s.value)])]))])]});if(a.type=="Primitive")return se("span",a.value.toString())}function O(a){if(a===null)return{type:"Primitive",value:"null"};if(Array.isArray(a))return{type:q(a)?"sameArrayField":"Array",value:a.map(s=>O(s))};if(typeof a=="object")return{type:"Object",value:Object.entries(a).map(([s,n])=>({name:s,value:O(n)}))};if(K(a))return{type:"Primitive",value:a}}function q(a){return a.map(s=>Object.keys(s).join("|")).every((s,n,i)=>s===i[0])&&!Array.isArray(a[0])&&a.length>1}function K(a){return["string","number","bigint","boolean","undefined","symbol","null","object"].includes(typeof a)}P([u,m],async(a,s)=>{try{let n;switch(m.value){case"JSON Pointer":n=I.get(d.value||{},u.value);break;case"JSON Path":n=H.query(d.value,u.value);break;default:break}c.value=n,S.value=JSON.stringify(n)}catch(n){S.value=n.toString()}});function D(a,s){try{return I.get(s,a)}catch{return}}function Q(){try{return c.value?j(O(c.value)):l("p",null,[t("empty object")])}catch(a){return l("p",null,[a.toString()])}}return(a,s)=>(g(),N(r(k),{vertical:"",style:{width:"100%",overflow:"scroll",gap:"0"}},{default:o(()=>[l(r(k),{justify:"space-between",style:{padding:"4px 6px","flex-grow":"1","border-bottom":"1px solid var(--n-border-color)"}},{default:o(()=>[l(r(k),{justify:"start",style:{"column-gap":"2px","align-items":"center"}},{default:o(()=>[l(r(J),{onClick:s[0]||(s[0]=n=>C(0))},{default:o(()=>[l(r(A),{size:"24"},{default:o(()=>[e("img",{src:r(ue),style:{width:"100%"}},null,8,pe)]),_:1})]),_:1}),l(r(J),{onClick:s[1]||(s[1]=n=>x())},{default:o(()=>[t("Run "),l(r(A),{size:"20",style:{"margin-left":"5px"}},{default:o(()=>[l(r(oe))]),_:1})]),_:1}),l(r(ae),{size:"small",label:"auto",checked:v.value,"onUpdate:checked":s[2]||(s[2]=n=>v.value=n)},null,8,["checked"])]),_:1}),l(r(J),{justify:"end",onClick:s[3]||(s[3]=n=>C(2))},{default:o(()=>[l(r(A),{size:"24"},{default:o(()=>[e("img",{src:r(ce),style:{width:"100%"}},null,8,de)]),_:1})]),_:1})]),_:1}),l(r(Z),{style:{height:"calc(100% - var(--header-height))"}},{default:o(()=>[l(r($),{size:h.value[0].size},{default:o(()=>[l(r(L),{class:"code_text",style:{height:"100%",overflow:"scroll"},value:_.value,"onUpdate:value":s[4]||(s[4]=n=>_.value=n),type:"textarea",placeholder:'JSON Text { "a" : "123" }'},null,8,["value"])]),_:1},8,["size"]),l(r($),{size:h.value[1].size,class:"json_table"},{default:o(()=>[(g(),N(T(()=>V(U.value))))]),_:1},8,["size"]),l(r($),{size:h.value[2].size,style:{height:"100%","align-items":"flex-start"}},{default:o(()=>[l(r(k),{vertical:"",style:{height:"100%",width:"100%",overflow:"scroll"}},{default:o(()=>{var n;return[e("div",me,[l(r(k),{style:{"flex-direction":"row"}},{default:o(()=>[l(r(ne),{value:m.value,"onUpdate:value":s[5]||(s[5]=i=>m.value=i),style:le({width:`calc(${Math.max(...w.map(i=>i.label.length))/1.3}rem)`}),options:w},null,8,["value","style"]),l(r(re),{style:{"margin-bottom":"15px",width:"max-content","flex-grow":"1"},value:u.value,"onUpdate:value":s[6]||(s[6]=i=>u.value=i),"input-props":{autocomplete:"disabled"},options:B(),placeholder:"JSON Pointer e.g. /foo/bar/0",clearable:""},null,8,["value","options"])]),_:1}),l(r(ie),null,{default:o(()=>[m.value=="JSON Pointer"?(g(),N(r(R),{key:0,title:"What's JSON Pointer?",name:"1"},{default:o(()=>[l(r(M),{title:"Example"},{default:o(()=>[he,ve,fe,ge,ye,_e]),_:1})]),_:1})):m.value=="JSON Path"?(g(),N(r(R),{key:1,title:"JSONPath - XPath for JSON",name:"1"},{default:o(()=>[l(r(M),{title:"Example"},{default:o(()=>[Se,be,je,Ne]),_:1})]),_:1})):E("",!0)]),_:1}),(g(),N(T(()=>Q()),{style:{margin:"1rem auto",display:"block"}})),((n=S.value)==null?void 0:n.length)>0?(g(),te("div",ke,[ze,l(r(L),{class:"code_text",value:S.value,"onUpdate:value":s[7]||(s[7]=i=>S.value=i),type:"textarea"},null,8,["value"])])):E("",!0)])]}),_:1})]),_:1},8,["size"])]),_:1})]),_:1}))}});export{We as default};
//# sourceMappingURL=JsonTable-BZhJrHPA.js.map
